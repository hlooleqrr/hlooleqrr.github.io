<!-- âœ… [Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙˆÙ„: Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© + Ø§Ù„ØªØµÙ…ÙŠÙ… + Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©] -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„</title>
  <style>
    body { font-family: 'Tajawal', sans-serif; background: #f4f6f8; margin: 0; text-align: center; font-size: 32px; }
    header { background: #005c48; color: #fff; padding: 25px; font-size: 34px; }
    .container {
      max-width: 650px;
      margin: 25px auto;
      background: #fff;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,.1);
    }
    input, select, button {
      width: 92%;
      padding: 20px;
      margin: 18px 0;
      font-size: 32px;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    select option { font-size: 30px; }
    button {
      background: #00796b;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    button:hover { background: #004d40; }
    .small-reset {
      font-size: 28px;
      padding: 12px 20px;
      margin-top: 22px;
      background: #e3f2fd;
      color: #1565c0;
      border: none;
      cursor: pointer;
      border-radius: 15px;
    }
    .small-reset:hover { background: #bbdefb; }
    footer {
      font-size: 26px;
      color: #666;
      margin-top: 40px;
      padding: 15px;
    }
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInMove .6s forwards;
    }
    @keyframes fadeInMove {
      to { opacity: 1; transform: translateY(0); }
    }
    .result p {
      margin: 12px 0;
      font-size: 30px;
      line-height: 1.6;
    }
    .result h2, .result h3 {
      font-size: 34px;
    }
    .highlight {
      font-size: 36px;
      font-weight: bold;
      color: #004d40;
    }
  </style>
</head>
<body>
<header>
  <h1>Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ©</h1>
  <p>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©</p>
</header>
<div class="container" id="form-container">
  <div id="question"></div>
  <button id="mainButton" onclick="handleStartOrReset()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø³Ø¨Ø©</button>
  <div id="nextContainer" style="display:none">
    <button onclick="nextQuestion()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
  </div>
  <div id="resetButtonContainer" style="display:none">
    <button class="small-reset" onclick="resetCalc()">ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø©</button>
  </div>
</div><!-- âœ… [Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠ: ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†ØªÙŠØ¬Ø© + Ø§Ù„ÙÙˆØªØ± ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®] -->
<div class="container" id="resultContainer" style="display:none">
  <div id="resultBox"></div>
</div>

<footer>
  <p id="datetimeFooter">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± - Ø§Ù„ØªØ§Ø±ÙŠØ®:</p>
</footer>

<script>
function updateDateTime() {
  const now = new Date();
  const gYear = now.getFullYear();
  const gMonth = (now.getMonth() + 1).toString().padStart(2, '0');
  const gDay = now.getDate().toString().padStart(2, '0');
  const gHours = now.getHours().toString().padStart(2, '0');
  const gMinutes = now.getMinutes().toString().padStart(2, '0');

  const hijri = new Intl.DateTimeFormat('ar-TN-u-ca-islamic', {
    day: '2-digit', month: '2-digit', year: 'numeric'
  }).format(now).replace(/(\d+)\/(\d+)\/(\d+)/, (_, d, m, y) => `${y}/${m.padStart(2,'0')}/${d.padStart(2,'0')}`);

  document.getElementById('datetimeFooter').innerText =
    `Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± - Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ: ${hijri} - Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ: ${gYear}/${gMonth}/${gDay} - Ø§Ù„ÙˆÙ‚Øª: ${gHours}:${gMinutes}`;
}
setInterval(updateDateTime, 1000);
updateDateTime();
</script><!-- âœ… [Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù„Ø«: Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„ØªÙ†Ù‚Ù„] -->
<script>
let step = 0;
let commitmentStep = 0;
let currentCommitment = {};
let hasStarted = false;
let answers = {
  commitments: []
};

function handleStartOrReset() {
  if (!hasStarted) {
    hasStarted = true;
    document.getElementById('mainButton').style.display = 'none';
    document.getElementById('resetButtonContainer').style.display = 'block';
    showQuestion();
  } else {
    resetCalc();
  }
}

function resetCalc() {
  answers = { commitments: [] };
  step = 0;
  commitmentStep = 0;
  currentCommitment = {};
  hasStarted = true;
  document.getElementById('mainButton').style.display = 'none';
  document.getElementById('resetButtonContainer').style.display = 'block';
  document.getElementById('resultContainer').style.display = 'none';
  document.getElementById('resultBox').innerHTML = '';
  showQuestion();
}

function showQuestion() {
  const cont = document.getElementById('question');
  cont.innerHTML = '';
  document.getElementById('nextContainer').style.display = 'block';
  let q;
  if (step < generalQuestions.length) {
    q = generalQuestions[step];
    if (q.show && !q.show(answers)) {
      step++;
      showQuestion();
      return;
    }
  } else if (answers.hasCommitments === 'Ù†Ø¹Ù…') {
    q = commitmentQuestions[commitmentStep];
    if (q && q.show && !q.show(answers)) {
      commitmentStep++;
      showQuestion();
      return;
    }
  }

  if (q) {
    const label = document.createElement('label');
    label.textContent = q.question;
    label.className = 'fade-in';
    cont.appendChild(label);
    const input = q.render();
    input.className = 'fade-in';
    cont.appendChild(input);
  } else {
    calculate();
  }
}

function nextQuestion() {
  const q = (step < generalQuestions.length)
    ? generalQuestions[step]
    : commitmentQuestions[commitmentStep];

  if (!q) {
    calculate();
    return;
  }

  const input = document.querySelector('#question input, #question select');
  if (!input) return;

  const value = input.type === 'checkbox' ? input.checked : input.value;
  if (step < generalQuestions.length) {
    answers[q.name] = value;
    step++;
  } else {
    currentCommitment[q.name] = value;
    commitmentStep++;
    if (commitmentStep >= commitmentQuestions.length) {
      answers.commitments.push(currentCommitment);
      currentCommitment = {};
      commitmentStep = 0;
      if (value === 'Ù„Ø§') step++;
    }
  }
  showQuestion();
}
</script><!-- âœ… [Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø¹: Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù…Ø«Ù„ Ø§Ù„Ø§Ø³Ù…ØŒ Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ØŒ Ø§Ù„ÙˆØ¸ÙŠÙØ©ØŒ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ØŒ Ø§Ù„Ø±ØªØ¨Ø©] -->
<script>
const generalQuestions = [
  {
    name: 'fullName',
    question: 'Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…:',
    render: () => {
      const input = document.createElement('input');
      input.type = 'text';
      input.placeholder = 'Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ²';
      return input;
    }
  },
  {
    name: 'financeType',
    question: 'Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ØªØ±ÙŠØ¯ Ø­Ø³Ø¨ØªÙ‡:',
    render: () => {
      const select = document.createElement('select');
      ['ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ Ø£Ùˆ ØªÙ…ÙˆÙŠÙ„ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ', 'ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ'].forEach(val => {
        const option = document.createElement('option');
        option.value = val;
        option.textContent = val;
        select.appendChild(option);
      });
      return select;
    }
  },
  {
    name: 'jobType',
    question: 'Ù…Ø§ Ù†ÙˆØ¹ ÙˆØ¸ÙŠÙØªÙƒØŸ',
    render: () => {
      const select = document.createElement('select');
      ['Ø¹Ø³ÙƒØ±ÙŠ', 'Ù…Ø¯Ù†ÙŠ', 'Ø®Ø§Øµ Ø´Ø¨Ù‡ Ø­ÙƒÙˆÙ…ÙŠ', 'Ø®Ø§Øµ Ù…Ø¹ØªÙ…Ø¯', 'Ø®Ø§Øµ ØºÙŠØ± Ù…Ø¹ØªÙ…Ø¯'].forEach(val => {
        const option = document.createElement('option');
        option.value = val;
        option.textContent = val;
        select.appendChild(option);
      });
      return select;
    }
  },
  {
    name: 'birthHijriYear',
    question: 'Ø§Ø®ØªØ± Ø³Ù†Ø© Ù…ÙŠÙ„Ø§Ø¯Ùƒ (Ù‡Ø¬Ø±ÙŠ):',
    render: () => {
      const select = document.createElement('select');
      for (let y = 1370; y <= 1430; y++) {
        const option = document.createElement('option');
        option.value = y;
        option.textContent = y;
        if (y === 1412) option.selected = true;
        select.appendChild(option);
      }
      return select;
    }
  },
  {
    name: 'birthHijriMonth',
    question: 'Ø§Ø®ØªØ± Ø´Ù‡Ø± Ù…ÙŠÙ„Ø§Ø¯Ùƒ (Ù‡Ø¬Ø±ÙŠ):',
    render: () => {
      const select = document.createElement('select');
      for (let m = 1; m <= 12; m++) {
        const option = document.createElement('option');
        option.value = m.toString().padStart(2, '0');
        option.textContent = m;
        select.appendChild(option);
      }
      return select;
    }
  },
  {
    name: 'birthHijriDay',
    question: 'Ø§Ø®ØªØ± ÙŠÙˆÙ… Ù…ÙŠÙ„Ø§Ø¯Ùƒ (Ù‡Ø¬Ø±ÙŠ):',
    render: () => {
      const select = document.createElement('select');
      for (let d = 1; d <= 30; d++) {
        const option = document.createElement('option');
        option.value = d.toString().padStart(2, '0');
        option.textContent = d;
        select.appendChild(option);
      }
      return select;
    }
  },
  {
    name: 'rank',
    question: 'Ù…Ø§ Ù‡ÙŠ Ø±ØªØ¨ØªÙƒ Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©ØŸ',
    show: (answers) => answers.jobType === 'Ø¹Ø³ÙƒØ±ÙŠ',
    render: () => {
      const select = document.createElement('select');
      ['Ø¬Ù†Ø¯ÙŠ', 'Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„', 'Ø¹Ø±ÙŠÙ', 'ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨', 'Ø±Ù‚ÙŠØ¨', 'Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„', 'Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡',
       'Ù…Ù„Ø§Ø²Ù…', 'Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„', 'Ù†Ù‚ÙŠØ¨', 'Ø±Ø§Ø¦Ø¯', 'Ù…Ù‚Ø¯Ù…', 'Ø¹Ù‚ÙŠØ¯', 'Ø¹Ù…ÙŠØ¯', 'Ù„ÙˆØ§Ø¡'].forEach(val => {
        const option = document.createElement('option');
        option.value = val;
        option.textContent = val;
        select.appendChild(option);
      });
      return select;
    }
  }
];
</script><!-- âœ… [Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Ù…Ø³: Ù…Ù†Ø·Ù‚ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ Ø§Ù„Ù…Ù…ØªØ¯ Ù„Ù„Ø¹Ø³ÙƒØ±ÙŠÙŠÙ† Ø¨Ø¹Ø¯ Ø§Ù„Ø±ØªØ¨Ø© ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯] -->
<script>
generalQuestions.push({
  name: 'wantExtendedRetirement',
  question: 'Ø£Ù†Øª ØªØªÙ‚Ø§Ø¹Ø¯ Ø®Ù„Ø§Ù„ Ø£Ù‚Ù„ Ù…Ù† 25 Ø³Ù†Ø©ØŒ Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø­Ø³Ø¨Ø© Ù…Ù…ØªØ¯Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ØŸ',
  show: (a) => {
    if (a.jobType !== 'Ø¹Ø³ÙƒØ±ÙŠ' || !a.birthHijriYear || !a.rank) return false;

    const currentHijriYear = 1446;
    const ranksRetireAge = {
      "Ø¬Ù†Ø¯ÙŠ": 44, "Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„": 44, "Ø¹Ø±ÙŠÙ": 46, "ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨": 46,
      "Ø±Ù‚ÙŠØ¨": 48, "Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„": 50, "Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡": 52,
      "Ù…Ù„Ø§Ø²Ù…": 48, "Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„": 50, "Ù†Ù‚ÙŠØ¨": 52, "Ø±Ø§Ø¦Ø¯": 54,
      "Ù…Ù‚Ø¯Ù…": 56, "Ø¹Ù‚ÙŠØ¯": 58, "Ø¹Ù…ÙŠØ¯": 60, "Ù„ÙˆØ§Ø¡": 60
    };

    const retireAge = ranksRetireAge[a.rank] || 44;
    const userAge = currentHijriYear - parseInt(a.birthHijriYear);
    const yearsLeft = retireAge - userAge;
    return yearsLeft < 25;
  },
  render: () => {
    const select = document.createElement('select');
    ['Ù†Ø¹Ù…', 'Ù„Ø§'].forEach(val => {
      const option = document.createElement('option');
      option.value = val;
      option.textContent = val;
      select.appendChild(option);
    });
    return select;
  }
});

generalQuestions.push({
  name: 'hireHijriYear',
  question: 'Ø§Ø®ØªØ± Ø³Ù†Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† (Ù‡Ø¬Ø±ÙŠ):',
  show: (a) => a.wantExtendedRetirement === 'Ù†Ø¹Ù…',
  render: () => {
    const select = document.createElement('select');
    for (let y = 1400; y <= 1447; y++) {
      const option = document.createElement('option');
      option.value = y;
      option.textContent = y;
      select.appendChild(option);
    }
    return select;
  }
});

generalQuestions.push({
  name: 'hireHijriMonth',
  question: 'Ø§Ø®ØªØ± Ø´Ù‡Ø± Ø§Ù„ØªØ¹ÙŠÙŠÙ† (Ù‡Ø¬Ø±ÙŠ):',
  show: (a) => a.wantExtendedRetirement === 'Ù†Ø¹Ù…',
  render: () => {
    const select = document.createElement('select');
    for (let m = 1; m <= 12; m++) {
      const option = document.createElement('option');
      option.value = m.toString().padStart(2, '0');
      option.textContent = m;
      select.appendChild(option);
    }
    return select;
  }
});

generalQuestions.push({
  name: 'hireHijriDay',
  question: 'Ø§Ø®ØªØ± ÙŠÙˆÙ… Ø§Ù„ØªØ¹ÙŠÙŠÙ† (Ù‡Ø¬Ø±ÙŠ):',
  show: (a) => a.wantExtendedRetirement === 'Ù†Ø¹Ù…',
  render: () => {
    const select = document.createElement('select');
    for (let d = 1; d <= 30; d++) {
      const option = document.createElement('option');
      option.value = d.toString().padStart(2, '0');
      option.textContent = d;
      select.appendChild(option);
    }
    return select;
  }
});
</script>// âœ… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³Ø§Ø¯Ø³: Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ Ø§Ù„Ù…Ù…ØªØ¯ Ù„Ù„Ø¹Ø³ÙƒØ±ÙŠÙŠÙ†

// ğŸ”¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ø§Ù„Ø­Ø³Ø¨Ø© Ø§Ù„Ù…Ù…ØªØ¯Ø©
{
  name: "wantsExtendedRetirement",
  question: "Ù‡Ù„ ØªØ±ØºØ¨ Ø¨Ø§Ù„Ø­Ø³Ø¨Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ØŸ",
  type: "select",
  options: ["Ù†Ø¹Ù…", "Ù„Ø§"],
  show: (a) => a.financeType === "ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ" && a.jobType === "Ø¹Ø³ÙƒØ±ÙŠ" && a.retirementYearsLeft < 25
},
{
  name: "hireHijriDay",
  question: "Ø§Ø®ØªØ± ÙŠÙˆÙ… Ø§Ù„ØªØ¹ÙŠÙŠÙ† (Ù‡Ø¬Ø±ÙŠ)",
  type: "select",
  options: Array.from({ length: 30 }, (_, i) => `${i + 1}`),
  show: (a) => a.wantsExtendedRetirement === "Ù†Ø¹Ù…"
},
{
  name: "hireHijriMonth",
  question: "Ø§Ø®ØªØ± Ø´Ù‡Ø± Ø§Ù„ØªØ¹ÙŠÙŠÙ† (Ù‡Ø¬Ø±ÙŠ)",
  type: "select",
  options: Array.from({ length: 12 }, (_, i) => `${i + 1}`),
  show: (a) => a.wantsExtendedRetirement === "Ù†Ø¹Ù…"
},
{
  name: "hireHijriYear",
  question: "Ø§Ø®ØªØ± Ø³Ù†Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† (Ù‡Ø¬Ø±ÙŠ)",
  type: "select",
  options: Array.from({ length: 40 }, (_, i) => `${1410 + i}`),
  show: (a) => a.wantsExtendedRetirement === "Ù†Ø¹Ù…"
}

// ğŸ”¹ Ø¯ÙˆØ§Ù„ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯
function hijriToGregorian(hYear, hMonth, hDay) {
  const approxDate = new Date(hYear * 354 + hMonth * 29.5 + hDay);
  const offset = (hYear - 1400) * 11;
  approxDate.setFullYear(approxDate.getFullYear() + offset);
  return approxDate;
}

function calculateMilitaryRetirement(rank, hijriYear, hijriMonth, hijriDay) {
  const hireDate = hijriToGregorian(hijriYear, hijriMonth, hijriDay);
  const today = new Date();
  const yearsOfService = Math.floor((today - hireDate) / (1000 * 60 * 60 * 24 * 365.25));
  const maxDegree = Math.min(yearsOfService, 15);

  const baseSalaries = {
    "Ø¬Ù†Ø¯ÙŠ": 3220, "Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„": 3395, "Ø¹Ø±ÙŠÙ": 3765, "ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨": 4455, "Ø±Ù‚ÙŠØ¨": 5260,
    "Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„": 6180, "Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡": 7215, "Ù…Ù„Ø§Ø²Ù…": 7590, "Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„": 8835,
    "Ù†Ù‚ÙŠØ¨": 10600, "Ø±Ø§Ø¦Ø¯": 13515, "Ù…Ù‚Ø¯Ù…": 14645, "Ø¹Ù‚ÙŠØ¯": 16520,
    "Ø¹Ù…ÙŠØ¯": 18600, "Ù„ÙˆØ§Ø¡": 21390
  };

  const increments = {
    "Ø¬Ù†Ø¯ÙŠ": 125, "Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„": 145, "Ø¹Ø±ÙŠÙ": 155, "ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨": 180, "Ø±Ù‚ÙŠØ¨": 210,
    "Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„": 240, "Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡": 280, "Ù…Ù„Ø§Ø²Ù…": 380, "Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„": 415,
    "Ù†Ù‚ÙŠØ¨": 495, "Ø±Ø§Ø¦Ø¯": 265, "Ù…Ù‚Ø¯Ù…": 470, "Ø¹Ù‚ÙŠØ¯": 510,
    "Ø¹Ù…ÙŠØ¯": 570, "Ù„ÙˆØ§Ø¡": 665
  };

  const basic = baseSalaries[rank] + increments[rank] * (maxDegree - 1);
  const retirement = Math.round((basic * yearsOfService / 40) * 0.55);

  return {
    Ø³Ù†ÙˆØ§Øª_Ø§Ù„Ø®Ø¯Ù…Ø©: yearsOfService,
    Ø§Ù„Ø¯Ø±Ø¬Ø©: maxDegree,
    Ø§Ù„Ø±Ø§ØªØ¨_Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ: basic,
    Ø§Ù„Ø±Ø§ØªØ¨_Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ÙŠ: retirement
  };
}

// ğŸ”¹ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
if (answers.wantsExtendedRetirement === "Ù†Ø¹Ù…") {
  const result = calculateMilitaryRetirement(
    answers.rank,
    parseInt(answers.hireHijriYear),
    parseInt(answers.hireHijriMonth),
    parseInt(answers.hireHijriDay)
  );

  answers.serviceYears = result.Ø³Ù†ÙˆØ§Øª_Ø§Ù„Ø®Ø¯Ù…Ø©;
  answers.finalBasicSalary = result.Ø§Ù„Ø±Ø§ØªØ¨_Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ;
  answers.estimatedRetirement = result.Ø§Ù„Ø±Ø§ØªØ¨_Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ÙŠ;
}// âœ… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³Ø§Ø¨Ø¹: Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ù‚Ø³Ø§Ø· Ù‚Ø¨Ù„ ÙˆØ¨Ø¹Ø¯ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ (Ø§Ù„Ù…Ù…ØªØ¯)

function hijriToGregorian(hYear, hMonth, hDay) {
  const hijriDate = new HijriDate(hYear, hMonth - 1, hDay);
  const gDate = hijriDate.toGregorian();
  return new Date(gDate.getFullYear(), gDate.getMonth(), gDate.getDate());
}

function getRetirementAgeByRank(rank) {
  const ranks = {
    "Ø¬Ù†Ø¯ÙŠ": 44, "Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„": 44, "Ø¹Ø±ÙŠÙ": 46, "ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨": 46,
    "Ø±Ù‚ÙŠØ¨": 48, "Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„": 50, "Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡": 52,
    "Ù…Ù„Ø§Ø²Ù…": 48, "Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„": 50, "Ù†Ù‚ÙŠØ¨": 52,
    "Ø±Ø§Ø¦Ø¯": 54, "Ù…Ù‚Ø¯Ù…": 56, "Ø¹Ù‚ÙŠØ¯": 58, "Ø¹Ù…ÙŠØ¯": 60, "Ù„ÙˆØ§Ø¡": 60
  };
  return ranks[rank] || 60;
}

function calculateExtendedRetirementInstallments(retirementAge, birthHijriYear, birthHijriMonth, birthHijriDay, totalMonths, currentNetSalary, retirementSalary) {
  const birthHijriDate = hijriToGregorian(parseInt(birthHijriYear), parseInt(birthHijriMonth), parseInt(birthHijriDay));
  const retirementDate = new Date(birthHijriDate);
  retirementDate.setFullYear(retirementDate.getFullYear() + retirementAge);

  const today = new Date();
  const monthsToRetirement = Math.floor((retirementDate - today) / (1000 * 60 * 60 * 24 * 30.4375));
  const monthsBefore = Math.max(0, Math.min(totalMonths, monthsToRetirement));
  const monthsAfter = totalMonths - monthsBefore;

  const installmentBefore = Math.floor(currentNetSalary * 0.55);
  const installmentAfter = Math.floor(retirementSalary * 0.55);

  const installments = [];
  if (monthsBefore > 0) {
    installments.push({
      from: 1,
      to: monthsBefore,
      amount: installmentBefore
    });
  }
  if (monthsAfter > 0) {
    installments.push({
      from: monthsBefore + 1,
      to: totalMonths,
      amount: installmentAfter
    });
  }

  return installments;
}

// âœ… ÙŠØªÙ… ØªÙ†ÙÙŠØ° Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ù€ "Ù†Ø¹Ù…" Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ù…ØªØ¯
if (
  answers.financeType === "ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ" &&
  answers.jobType === "Ø¹Ø³ÙƒØ±ÙŠ" &&
  answers.wantsExtendedRetirement === "Ù†Ø¹Ù…"
) {
  const retirementAge = getRetirementAgeByRank(answers.rank);
  const birthYear = parseInt(answers.birthHijriYear);
  const birthMonth = parseInt(answers.birthHijriMonth);
  const birthDay = parseInt(answers.birthHijriDay);
  const months = parseInt(answers.months);
  const currentSalary = parseInt(answers.salary);
  const retirementSalary = parseInt(answers.estimatedRetirement);

  const result = calculateExtendedRetirementInstallments(
    retirementAge, birthYear, birthMonth, birthDay,
    months, currentSalary, retirementSalary
  );

  answers.extendedInstallments = result;
}// âœ… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù…Ù†: Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©

{
  name: "hasCommitments",
  question: "Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù…Ø§Ù„ÙŠØ© Ø­Ø§Ù„ÙŠØ©ØŸ",
  type: "select",
  options: ["Ù†Ø¹Ù…", "Ù„Ø§"],
  show: () => true
},
// Ø¥Ø°Ø§ Ø£Ø¬Ø§Ø¨ "Ù†Ø¹Ù…" Ù†Ø¨Ø¯Ø£ ØªÙƒØ±Ø§Ø± Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©:
{
  name: "commitmentType",
  question: "Ù…Ø§ Ù†ÙˆØ¹ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…ØŸ",
  type: "select",
  options: ["Ù‚Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©", "Ù‚Ø±Ø¶ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ", "Ø£Ø®Ø±Ù‰"],
  show: (a) => a.hasCommitments === "Ù†Ø¹Ù…"
},
{
  name: "commitmentAmount",
  question: "ÙƒÙ… Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…ØŸ",
  type: "number",
  show: (a) => a.hasCommitments === "Ù†Ø¹Ù…"
},
{
  name: "commitmentMonthsLeft",
  question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ù‡Ø± Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…ØŸ",
  type: "select",
  options: Array.from({ length: 60 }, (_, i) => `${i + 1}`),
  show: (a) => a.hasCommitments === "Ù†Ø¹Ù…"
},
{
  name: "hasBalloonPayment",
  question: "Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Ø¯ÙØ¹Ø© Ø£Ø®ÙŠØ±Ø©ØŸ",
  type: "select",
  options: ["Ù†Ø¹Ù…", "Ù„Ø§"],
  show: (a) => a.hasCommitments === "Ù†Ø¹Ù…" && a.commitmentType === "Ù‚Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©"
},
{
  name: "balloonAmount",
  question: "ÙƒÙ… Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©ØŸ",
  type: "number",
  show: (a) => a.hasBalloonPayment === "Ù†Ø¹Ù…"
},
{
  name: "anotherCommitment",
  question: "Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØªØ²Ø§Ù… Ø¢Ø®Ø±ØŸ",
  type: "select",
  options: ["Ù†Ø¹Ù…", "Ù„Ø§"],
  show: (a) => a.hasCommitments === "Ù†Ø¹Ù…"
}// âœ… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ØªØ§Ø³Ø¹: Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ù‚Ø³Ø§Ø· Ø§Ù„Ù…ØªØ¯Ø±Ø¬Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª

function buildCommitmentSchedule(commitments, maxMonths) {
  const schedule = Array(maxMonths).fill(0);

  commitments.forEach((c) => {
    const months = parseInt(c.months);
    const monthly = parseInt(c.amount);
    for (let i = 0; i < months && i < maxMonths; i++) {
      schedule[i] += monthly;
    }

    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¯ÙØ¹Ø© Ø£Ø®ÙŠØ±Ø© Ù„Ø³ÙŠØ§Ø±Ø©
    if (c.balloon) {
      const balloon = parseInt(c.balloon);
      const start = months;
      const end = Math.min(start + 24, maxMonths);
      const balloonMonthly = Math.ceil(balloon / (end - start));
      for (let i = start; i < end; i++) {
        schedule[i] += balloonMonthly;
      }
    }
  });

  return schedule;
}

function buildFinalInstallmentsWithCommitments(
  maxMonths,
  installments,
  commitmentSchedule
) {
  const result = [];
  let current = null;

  for (let i = 0; i < maxMonths; i++) {
    let base = 0;
    for (const segment of installments) {
      if (i + 1 >= segment.from && i + 1 <= segment.to) {
        base = segment.amount;
        break;
      }
    }

    const available = base - (commitmentSchedule[i] || 0);
    const amount = Math.max(0, available);

    if (!current || current.amount !== amount) {
      if (current) current.to = i;
      current = { from: i + 1, to: i + 1, amount };
      result.push(current);
    } else {
      current.to = i + 1;
    }
  }

  return result;
}

// âœ… ØªÙ†ÙÙŠØ° Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ø¨Ø¹Ø¯ Ù…Ø¹Ø±ÙØ© answers.commitments + answers.extendedInstallments

if (Array.isArray(answers.commitments) && Array.isArray(answers.extendedInstallments)) {
  const months = parseInt(answers.months);
  const schedule = buildCommitmentSchedule(answers.commitments, months);
  answers.installments = buildFinalInstallmentsWithCommitments(
    months,
    answers.extendedInstallments,
    schedule
  );
}function getDurationText(months) {
  const years = Math.floor(months / 12);
  const extra = months % 12;
  let parts = [];
  if (years > 0) parts.push(`${years} ${years === 1 ? "Ø³Ù†Ø©" : "Ø³Ù†ÙˆØ§Øª"}`);
  if (extra > 0) parts.push(`${extra} ${extra === 1 ? "Ø´Ù‡Ø±" : "Ø£Ø´Ù‡Ø±"}`);
  return parts.join(" Ùˆ ");
}

function showInstallmentsTable(container) {
  const installments = answers.installments;
  if (!Array.isArray(installments)) return;

  const div = document.createElement("div");
  div.style.textAlign = "right";
  div.style.marginTop = "25px";
  div.innerHTML = `<h3 style="color:#005c48;">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠØ©:</h3>`;

  installments.forEach(inst => {
    const duration = inst.to - inst.from + 1;
    const text = getDurationText(duration);
    const row = document.createElement("p");
    row.textContent = `Ù…Ù† ${inst.from} Ø¥Ù„Ù‰ ${inst.to} (${text}) = ${inst.amount.toLocaleString()} Ø±ÙŠØ§Ù„`;
    row.style.fontSize = "28px";
    div.appendChild(row);
  });

  container.appendChild(div);
}

// âœ… Ø¯Ø§Ø®Ù„ Ø¯Ø§Ù„Ø© showFinalResult() Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©:
showInstallmentsTable(document.getElementById("resultContainer"));
function getArabicDurationText(months) {
  const years = Math.floor(months / 12);
  const monthsLeft = months % 12;

  const yearText = years > 0 ? `${years} ${years === 1 ? "Ø³Ù†Ø©" : (years === 2 ? "Ø³Ù†ØªÙŠÙ†" : (years < 11 ? "Ø³Ù†ÙˆØ§Øª" : "Ø³Ù†Ø©"))}` : "";
  const monthText = monthsLeft > 0 ? `${monthsLeft} ${monthsLeft === 1 ? "Ø´Ù‡Ø±" : (monthsLeft === 2 ? "Ø´Ù‡Ø±ÙŠÙ†" : (monthsLeft < 11 ? "Ø£Ø´Ù‡Ø±" : "Ø´Ù‡Ø±Ø§Ù‹"))}` : "";

  if (yearText && monthText) return `${yearText} Ùˆ${monthText}`;
  return yearText || monthText || "0 Ø´Ù‡Ø±";
}

function showDuration(container) {
  const duration = parseInt(answers.months || "0");
  const text = getArabicDurationText(duration);

  const div = document.createElement("div");
  div.style.textAlign = "right";
  div.style.marginTop = "20px";
  div.innerHTML = `
    <h3 style="color:#005c48;">Ù…Ø¯Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„:</h3>
    <p style="font-size: 28px;">${duration} Ø´Ù‡Ø± (${text})</p>
  `;

  container.appendChild(div);
}

// âœ… Ø¯Ø§Ø®Ù„ Ø¯Ø§Ù„Ø© showFinalResult() Ø¨Ø¹Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ø·:
showDuration(document.getElementById("resultContainer"));
function formatCurrency(num) {
  return parseInt(num || 0).toLocaleString("ar-EG") + " Ø±ÙŠØ§Ù„";
}

function showSummary(container) {
  const {
    netFinance,
    netFinanceWithSupport,
    profitOnly,
    profitWithFees,
    totalWithProfit,
    fees,
    supportUsed
  } = answers;

  const p1 = document.createElement("p");
  p1.innerHTML = `Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØµØ§ÙÙŠ Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø±Ø³ÙˆÙ…: <strong style="color:green;">${formatCurrency(netFinance)}</strong>`;
  container.appendChild(p1);

  if (supportUsed === 'Ù†Ø¹Ù…') {
    const p2 = document.createElement("p");
    p2.innerHTML = `Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØµØ§ÙÙŠ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù…: <strong style="color:green;">${formatCurrency(netFinanceWithSupport)}</strong>`;
    container.appendChild(p2);
  }

  const p3 = document.createElement("p");
  p3.innerHTML = `Ø§Ù„Ø±Ø¨Ø­ Ø¯ÙˆÙ† Ø§Ù„Ø±Ø³ÙˆÙ…: <strong style="color:red;">${formatCurrency(profitOnly)}</strong>`;
  container.appendChild(p3);

  const p4 = document.createElement("p");
  p4.innerHTML = `Ø§Ù„Ø±Ø¨Ø­ Ù…Ø¹ Ø§Ù„Ø±Ø³ÙˆÙ…: <strong style="color:red;">${formatCurrency(profitWithFees)}</strong>`;
  container.appendChild(p4);

  const p5 = document.createElement("p");
  p5.innerHTML = `Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø´Ø§Ù…Ù„ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­: <strong>${formatCurrency(totalWithProfit)}</strong>`;
  container.appendChild(p5);

  const p6 = document.createElement("p");
  p6.innerHTML = `Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© + Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©: <strong>${formatCurrency(fees)}</strong>`;
  container.appendChild(p6);

  const advice = document.createElement("p");
  advice.style.marginTop = "40px";
  advice.innerHTML = "ğŸ“¸ Ø®Ø° Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© Ù„Ù†ØªÙŠØ¬ØªÙƒ Ø£Ùˆ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±.";
  container.appendChild(advice);
}

// ğŸ“Œ ÙŠØ¬Ø¨ Ø£Ù† ØªØ¶ÙŠÙ Ù‡Ø°Ø§ Ø¯Ø§Ø®Ù„ showFinalResult():
showSummary(document.getElementById("resultContainer"));
// Ø§Ù„ØªØ±Ø­ÙŠØ¨ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙŠÙ… ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªÙŠØ¬Ø©
const greeting = document.createElement("h2");
greeting.textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙˆÙ…Ø³Ù‡Ù„Ø§Ù‹ ÙŠØ§ ${answers.clientName}`;
document.getElementById("resultContainer").prepend(greeting);
<footer>
  <p id="datetimeFooter">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø±</p>
</footer>

<script>
function updateDateTimeFooter() {
  const today = new Date();
  const gregorian = today.toLocaleDateString("ar-EG");
  const hijri = today.toLocaleDateString("ar-SA-u-ca-islamic", {
    year: "numeric", month: "2-digit", day: "2-digit"
  });
  document.getElementById("datetimeFooter").innerText =
    `Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± - Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ: ${hijri} - Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ: ${gregorian}`;
}
setInterval(updateDateTimeFooter, 1000);
updateDateTimeFooter();
</script>
// âœ… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Ù…Ø³ Ø¹Ø´Ø±: Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø© Ù…Ù† Ø£Ø³ÙÙ„ ØµÙØ­Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©

const resetContainer = document.createElement("div");
resetContainer.style.marginTop = "30px";

const resetButton = document.createElement("button");
resetButton.textContent = "ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø©";
resetButton.style.backgroundColor = "#e0f0ff";
resetButton.style.border = "1px solid #007bff";
resetButton.style.color = "#007bff";
resetButton.style.padding = "15px 25px";
resetButton.style.fontSize = "28px";
resetButton.style.borderRadius = "8px";
resetButton.style.cursor = "pointer";

resetButton.onclick = () => {
  location.reload(); // ÙŠØ±Ø¬Ø¹Ùƒ Ù„Ù„Ø¨Ø¯Ø§ÙŠØ©
};

resetContainer.appendChild(resetButton);
document.getElementById("resultContainer").appendChild(resetContainer);
// âœ… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³Ø§Ø¨Ø¹ Ø¹Ø´Ø±: Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¨ÙØ§ØµÙ„Ø© ÙˆÙƒØªØ§Ø¨Ø© Ø¹Ø±Ø¨ÙŠØ©

function numberToArabicWords(num) {
  const ones = ["", "ÙˆØ§Ø­Ø¯", "Ø§Ø«Ù†Ø§Ù†", "Ø«Ù„Ø§Ø«Ø©", "Ø£Ø±Ø¨Ø¹Ø©", "Ø®Ù…Ø³Ø©", "Ø³ØªØ©", "Ø³Ø¨Ø¹Ø©", "Ø«Ù…Ø§Ù†ÙŠØ©", "ØªØ³Ø¹Ø©"];
  const tens = ["", "Ø¹Ø´Ø±Ø©", "Ø¹Ø´Ø±ÙˆÙ†", "Ø«Ù„Ø§Ø«ÙˆÙ†", "Ø£Ø±Ø¨Ø¹ÙˆÙ†", "Ø®Ù…Ø³ÙˆÙ†", "Ø³ØªÙˆÙ†", "Ø³Ø¨Ø¹ÙˆÙ†", "Ø«Ù…Ø§Ù†ÙˆÙ†", "ØªØ³Ø¹ÙˆÙ†"];
  const hundreds = ["", "Ù…Ø¦Ø©", "Ù…Ø¦ØªØ§Ù†", "Ø«Ù„Ø§Ø« Ù…Ø¦Ø©", "Ø£Ø±Ø¨Ø¹ Ù…Ø¦Ø©", "Ø®Ù…Ø³ Ù…Ø¦Ø©", "Ø³Øª Ù…Ø¦Ø©", "Ø³Ø¨Ø¹ Ù…Ø¦Ø©", "Ø«Ù…Ø§Ù† Ù…Ø¦Ø©", "ØªØ³Ø¹ Ù…Ø¦Ø©"];

  let result = "";

  const thousands = Math.floor(num / 1000);
  const hundredsPart = Math.floor((num % 1000) / 100);
  const tensPart = Math.floor((num % 100) / 10);
  const onesPart = num % 10;

  if (thousands > 0) {
    result += ones[thousands] + " Ø¢Ù„Ø§Ù ";
  }

  if (hundredsPart > 0) {
    result += hundreds[hundredsPart] + " ";
  }

  if (tensPart > 0) {
    result += tens[tensPart] + " ";
  }

  if (onesPart > 0 && tensPart === 0) {
    result += ones[onesPart] + " ";
  }

  return result.trim() + " Ø±ÙŠØ§Ù„";
}

// Ø¹Ù†Ø¯ Ø¹Ø±Ø¶ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØµØ§ÙÙŠ ÙˆØ§Ù„Ø±Ø¨Ø­
const netFinance = Math.round(result.netFinance || 0);
const profit = Math.round(result.profit || 0);

// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù†Ø§ØµØ±
const netFinanceText = document.createElement("div");
netFinanceText.innerHTML = `<strong>Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØµØ§ÙÙŠ Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø±Ø³ÙˆÙ…:</strong> ${netFinance.toLocaleString()} Ø±ÙŠØ§Ù„ (${numberToArabicWords(netFinance)})`;

const profitText = document.createElement("div");
profitText.innerHTML = `<strong>Ø§Ù„Ø±Ø¨Ø­ Ø¯ÙˆÙ† Ø§Ù„Ø±Ø³ÙˆÙ…:</strong> ${profit.toLocaleString()} Ø±ÙŠØ§Ù„ (${numberToArabicWords(profit)})`;

// Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ù„Ù†ØªÙŠØ¬Ø©
document.getElementById("resultContainer").appendChild(netFinanceText);
document.getElementById("resultContainer").appendChild(profitText);
// âœ… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù…Ù† Ø¹Ø´Ø±: Ø¹Ø±Ø¶ Ù…Ø¯Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø¨ØµÙŠØºØ© Ø¹Ø¯Ø¯ ÙˆÙƒØªØ§Ø¨Ø©

function formatDurationArabic(months) {
  const years = Math.floor(months / 12);
  const extraMonths = months % 12;

  let result = `${months} Ø´Ù‡Ø± (`;

  if (years > 0) {
    result += convertNumberToWords(years) + (years === 1 ? " Ø³Ù†Ø©" : " Ø³Ù†ÙˆØ§Øª");
  }

  if (years > 0 && extraMonths > 0) {
    result += " Ùˆ";
  }

  if (extraMonths > 0) {
    result += convertNumberToWords(extraMonths) + (extraMonths === 1 ? " Ø´Ù‡Ø±" : " Ø£Ø´Ù‡Ø±");
  }

  result += ")";

  return result;
}

function convertNumberToWords(n) {
  const words = [
    "", "ÙˆØ§Ø­Ø¯", "Ø§Ø«Ù†Ø§Ù†", "Ø«Ù„Ø§Ø«Ø©", "Ø£Ø±Ø¨Ø¹Ø©", "Ø®Ù…Ø³Ø©", "Ø³ØªØ©",
    "Ø³Ø¨Ø¹Ø©", "Ø«Ù…Ø§Ù†ÙŠØ©", "ØªØ³Ø¹Ø©", "Ø¹Ø´Ø±Ø©", "Ø£Ø­Ø¯ Ø¹Ø´Ø±", "Ø§Ø«Ù†Ø§ Ø¹Ø´Ø±"
  ];
  return n <= 12 ? words[n] : n + "";
}

// Ù…Ø«Ø§Ù„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:
const durationDiv = document.createElement("div");
durationDiv.style.marginTop = "25px";
durationDiv.style.fontSize = "30px";
durationDiv.innerHTML = `<strong>Ù…Ø¯Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„:</strong> ${formatDurationArabic(result.months || 0)}`;

document.getElementById("resultContainer").appendChild(durationDiv);
<!-- âœ… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø¹Ø´Ø±ÙˆÙ†: Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø© -->
<div id="resetButtonContainer" style="display: block; margin-top: 40px;">
  <button onclick="resetCalc()" style="background-color: #d0eaff; border: none; padding: 15px 30px; font-size: 28px; border-radius: 8px; cursor: pointer;">
    ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø©
  </button>
</div>
function resetCalc(){
  answers = { commitments: [] };
  step = commitmentStep = 0;
  currentCommitment = {};
  hasStarted = false;

  document.getElementById('question').innerHTML = '';
  document.getElementById('resultContainer').innerHTML = '';
  document.getElementById('resetButtonContainer').style.display = 'none';
  document.getElementById('mainButton').style.display = 'block';
}