<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„</title>
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      background: #f4f6f8;
      margin: 0;
      text-align: center;
      font-size: 32px;
    }
    header {
      background: #005c48;
      color: #fff;
      padding: 25px;
      font-size: 34px;
    }
    .container {
      max-width: 650px;
      margin: 25px auto;
      background: #fff;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,.1);
    }
    input, select, button {
      width: 92%;
      padding: 20px;
      margin: 18px 0;
      font-size: 32px;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    #mainButton {
      background: #00796b;
      color: white;
      font-size: 36px;
      cursor: pointer;
      border: none;
      padding: 20px 40px;
      border-radius: 8px;
      margin-top: 30px;
    }
    #resetButtonContainer {
      display: none;
      margin-top: 20px;
    }
    #resetButton {
      background: #ccc;
      color: #333;
      font-size: 28px;
      border: none;
      padding: 14px 30px;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ Ø£Ùˆ Ø§Ù„Ø´Ø®ØµÙŠ</header>
  <div class="container">
    <div id="question"></div>
    <div id="nextContainer" style="display: none;">
      <button onclick="nextQuestion()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
    <button id="mainButton" onclick="handleStartOrReset()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø³Ø¨Ø©</button>
    <div id="resetButtonContainer">
      <button id="resetButton" onclick="handleStartOrReset()">ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø©</button>
    </div>
  </div>
  <script>
    let answers = { commitments: [] }, step = 0, commitmentStep = 0, currentCommitment = {};
    let hasStarted = false;

    const generalQuestions = [
      {
        key: 'financeType',
        question: 'Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ØªØ±ÙŠØ¯ Ø­Ø³Ø¨ØªÙ‡:',
        type: 'select',
        options: ['ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ Ø£Ùˆ ØªÙ…ÙˆÙŠÙ„ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ', 'ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ']
      },
      {
        key: 'username',
        question: 'Ø§Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…:',
        type: 'text'
      },
      {
        key: 'jobType',
        question: 'Ù…Ø§ Ù†ÙˆØ¹ ÙˆØ¸ÙŠÙØªÙƒØŸ',
        type: 'select',
        options: ['Ø¹Ø³ÙƒØ±ÙŠ', 'Ù…Ø¯Ù†ÙŠ', 'Ø®Ø§Øµ Ø´Ø¨Ù‡ Ø­ÙƒÙˆÙ…ÙŠ', 'Ø®Ø§Øµ Ù…Ø¹ØªÙ…Ø¯', 'Ø®Ø§Øµ ØºÙŠØ± Ù…Ø¹ØªÙ…Ø¯']
      },
      {
        key: 'birthHijriDay',
        question: 'Ø§Ø®ØªØ± ÙŠÙˆÙ… Ù…ÙŠÙ„Ø§Ø¯Ùƒ (Ù‡Ø¬Ø±ÙŠ):',
        type: 'select',
        options: Array.from({ length: 30 }, (_, i) => `${i + 1}`)
      },
      {
        key: 'birthHijriMonth',
        question: 'Ø§Ø®ØªØ± Ø´Ù‡Ø± Ù…ÙŠÙ„Ø§Ø¯Ùƒ (Ù‡Ø¬Ø±ÙŠ):',
        type: 'select',
        options: Array.from({ length: 12 }, (_, i) => `${i + 1}`)
      },
      {
        key: 'birthHijriYear',
        question: 'Ø§Ø®ØªØ± Ø³Ù†Ø© Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ (Ù‡Ø¬Ø±ÙŠ):',
        type: 'select',
        options: Array.from({ length: 61 }, (_, i) => `${1370 + i}`).reverse()
      }
    ];

    function handleStartOrReset() {
      if (!hasStarted) {
        hasStarted = true;
        document.getElementById('mainButton').style.display = 'none';
        document.getElementById('resetButtonContainer').style.display = 'block';
        showQuestion();
      } else {
        resetCalc();
      }
    }

    function resetCalc() {
      answers = { commitments: [] };
      step = commitmentStep = 0;
      currentCommitment = {};
      hasStarted = true;
      document.getElementById('mainButton').style.display = 'none';
      document.getElementById('resetButtonContainer').style.display = 'block';
      showQuestion();
    }

    function showQuestion() {
      const cont = document.getElementById('question');
      cont.innerHTML = '';
      document.getElementById('nextContainer').style.display = 'block';

      let q = generalQuestions[step];
      if (!q) return;

      const label = document.createElement('label');
      label.textContent = q.question;
      cont.appendChild(label);

      let input;
      if (q.type === 'select') {
        input = document.createElement('select');
        input.innerHTML = q.options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
      } else {
        input = document.createElement('input');
        input.type = q.type;
      }
      input.id = 'input';
      if (answers[q.key]) input.value = answers[q.key];
      cont.appendChild(input);
    }

    function nextQuestion() {
      const q = generalQuestions[step];
      const input = document.getElementById('input');
      if (input && input.value) {
        answers[q.key] = input.value;
        step++;
        showQuestion();
      }
    }
  </script><script>
let answers = { commitments: [] }, step = 0, commitmentStep = 0, currentCommitment = {};
let hasStarted = false;

// âœ… Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©
const militaryRanksData = {
  "Ø¬Ù†Ø¯ÙŠ": { base: 3220, increment: 125, maxGrade: 15 },
  "Ø¹Ø±ÙŠÙ": { base: 3765, increment: 155, maxGrade: 15 },
  "ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨": { base: 4455, increment: 180, maxGrade: 15 },
  "Ø±Ù‚ÙŠØ¨": { base: 5260, increment: 210, maxGrade: 15 },
  "Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„": { base: 6180, increment: 240, maxGrade: 15 },
  "Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡": { base: 7215, increment: 280, maxGrade: 15 },
  "Ù…Ù„Ø§Ø²Ù…": { base: 7590, increment: 380, maxGrade: 15 },
  "Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„": { base: 8835, increment: 415, maxGrade: 15 },
  "Ù†Ù‚ÙŠØ¨": { base: 10600, increment: 495, maxGrade: 15 },
  "Ø±Ø§Ø¦Ø¯": { base: 13515, increment: 265, maxGrade: 15 },
  "Ù…Ù‚Ø¯Ù…": { base: 14645, increment: 470, maxGrade: 15 },
  "Ø¹Ù‚ÙŠØ¯": { base: 16520, increment: 510, maxGrade: 15 },
  "Ø¹Ù…ÙŠØ¯": { base: 18600, increment: 570, maxGrade: 15 },
  "Ù„ÙˆØ§Ø¡": { base: 21390, increment: 665, maxGrade: 15 }
};

// âœ… ØªØ­ÙˆÙŠÙ„ Ù‡Ø¬Ø±ÙŠ Ø¥Ù„Ù‰ Ù…ÙŠÙ„Ø§Ø¯ÙŠ ØªÙ‚Ø±ÙŠØ¨ÙŠ
function hijriToGregorianApprox(hYear, hMonth, hDay) {
  const hijriDays = (hYear - 1) * 354 + (hMonth - 1) * 29.5 + hDay;
  const gregorianDate = new Date(622, 6, 16);
  gregorianDate.setDate(gregorianDate.getDate() + Math.floor(hijriDays));
  return gregorianDate;
}

// âœ… Ø­Ø³Ø§Ø¨ Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¯Ù…Ø©
function calculateServiceYears(hireHijriYear, hireHijriMonth, hireHijriDay) {
  const hireDate = hijriToGregorianApprox(hireHijriYear, hireHijriMonth, hireHijriDay);
  const today = new Date();
  const years = (today - hireDate) / (1000 * 60 * 60 * 24 * 365.25);
  return Math.floor(years);
}

// âœ… Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
function getFinalBasicSalary(rank, serviceYears) {
  const data = militaryRanksData[rank];
  if (!data) return 0;
  const grade = Math.min(serviceYears, data.maxGrade);
  return data.base + data.increment * (grade - 1);
}

// âœ… Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
function calculateRetirementSalary(rank, hireHijriYear, hireHijriMonth, hireHijriDay) {
  const serviceYears = calculateServiceYears(hireHijriYear, hireHijriMonth, hireHijriDay);
  const finalBasic = getFinalBasicSalary(rank, serviceYears);
  const retirement = Math.round((finalBasic * serviceYears / 40) * 0.55);
  return {
    serviceYears: serviceYears,
    finalBasicSalary: finalBasic,
    retirementSalary: retirement
  };
}
</script><script>
// âœ… Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ø¨Ø§Ù„ØªØ³Ù„Ø³Ù„
const generalQuestions = [
  {
    key: 'clientName',
    text: 'Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…:',
    type: 'input',
    placeholder: ': ',
    show: () => true
  },
  {
    key: 'financeType',
    text: 'Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ØªØ±ÙŠØ¯ Ø­Ø³Ø¨ØªÙ‡:',
    type: 'select',
    options: ['ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ Ø£Ùˆ ØªÙ…ÙˆÙŠÙ„ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ', 'ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ'],
    show: () => true
  },
  {
    key: 'jobType',
    text: 'Ù…Ø§ Ù†ÙˆØ¹ ÙˆØ¸ÙŠÙØªÙƒØŸ',
    type: 'select',
    options: ['Ø¹Ø³ÙƒØ±ÙŠ', 'Ù…Ø¯Ù†ÙŠ', 'Ø®Ø§Øµ Ø´Ø¨Ù‡ Ø­ÙƒÙˆÙ…ÙŠ', 'Ø®Ø§Øµ Ù…Ø¹ØªÙ…Ø¯', 'Ø®Ø§Øµ ØºÙŠØ± Ù…Ø¹ØªÙ…Ø¯'],
    show: () => true
  },
  {
    key: 'birthHijriYear',
    text: 'Ø§Ø®ØªØ± Ø³Ù†Ø© Ù…ÙŠÙ„Ø§Ø¯Ùƒ (Ù‡Ø¬Ø±ÙŠ):',
    type: 'select',
    options: Array.from({ length: 61 }, (_, i) => `${1370 + i}`),
    show: () => true
  },
  {
    key: 'birthHijriMonth',
    text: 'Ø§Ø®ØªØ± Ø´Ù‡Ø± Ù…ÙŠÙ„Ø§Ø¯Ùƒ (Ù‡Ø¬Ø±ÙŠ):',
    type: 'select',
    options: Array.from({ length: 12 }, (_, i) => `${i + 1}`),
    show: () => true
  },
  {
    key: 'birthHijriDay',
    text: 'Ø§Ø®ØªØ± ÙŠÙˆÙ… Ù…ÙŠÙ„Ø§Ø¯Ùƒ (Ù‡Ø¬Ø±ÙŠ):',
    type: 'select',
    options: Array.from({ length: 30 }, (_, i) => `${i + 1}`),
    show: () => true
  },
  {
    key: 'rank',
    text: 'Ø§Ø®ØªØ± Ø±ØªØ¨ØªÙƒ Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©:',
    type: 'select',
    options: Object.keys(militaryRanksData),
    show: (a) => a.jobType === 'Ø¹Ø³ÙƒØ±ÙŠ'
  },
  {
    key: 'retireExtended',
    text: 'Ù…Ø¯Ø© ØªÙ‚Ø§Ø¹Ø¯Ùƒ Ø£Ù‚Ù„ Ù…Ù† 25 Ø³Ù†Ø©ØŒ Ù‡Ù„ ØªØ±ØºØ¨ Ø¨Ø§Ù„Ø­Ø³Ø¨Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ØŸ',
    type: 'select',
    options: ['Ù†Ø¹Ù…', 'Ù„Ø§'],
    show: (a) => {
      if (a.jobType !== 'Ø¹Ø³ÙƒØ±ÙŠ') return false;
      const year = parseInt(a.birthHijriYear);
      const ageNow = 1446 - year;
      const rankAge = getRetireAgeByRank(a.rank);
      return rankAge - ageNow < 25;
    }
  },
  {
    key: 'hireHijriYear',
    text: 'Ø§Ø®ØªØ± Ø³Ù†Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† (Ù‡Ø¬Ø±ÙŠ):',
    type: 'select',
    options: Array.from({ length: 35 }, (_, i) => `${1412 - i}`),
    show: (a) => a.retireExtended === 'Ù†Ø¹Ù…'
  },
  {
    key: 'hireHijriMonth',
    text: 'Ø§Ø®ØªØ± Ø´Ù‡Ø± Ø§Ù„ØªØ¹ÙŠÙŠÙ† (Ù‡Ø¬Ø±ÙŠ):',
    type: 'select',
    options: Array.from({ length: 12 }, (_, i) => `${i + 1}`),
    show: (a) => a.retireExtended === 'Ù†Ø¹Ù…'
  },
  {
    key: 'hireHijriDay',
    text: 'Ø§Ø®ØªØ± ÙŠÙˆÙ… Ø§Ù„ØªØ¹ÙŠÙŠÙ† (Ù‡Ø¬Ø±ÙŠ):',
    type: 'select',
    options: Array.from({ length: 30 }, (_, i) => `${i + 1}`),
    show: (a) => a.retireExtended === 'Ù†Ø¹Ù…'
  }
];

// âœ… Ø³Ù† Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ Ø­Ø³Ø¨ Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©
function getRetireAgeByRank(rank) {
  const map = {
    "Ø¬Ù†Ø¯ÙŠ": 44, "Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„": 44, "Ø¹Ø±ÙŠÙ": 46, "ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨": 46,
    "Ø±Ù‚ÙŠØ¨": 48, "Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„": 50, "Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡": 52,
    "Ù…Ù„Ø§Ø²Ù…": 48, "Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„": 50, "Ù†Ù‚ÙŠØ¨": 52, "Ø±Ø§Ø¦Ø¯": 54,
    "Ù…Ù‚Ø¯Ù…": 56, "Ø¹Ù‚ÙŠØ¯": 58, "Ø¹Ù…ÙŠØ¯": 60, "Ù„ÙˆØ§Ø¡": 60
  };
  return map[rank] || 60;
}
</script><script>
// âœ… Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©
const commitmentQuestions = [
  {
    key: 'type',
    text: 'Ù…Ø§ Ù†ÙˆØ¹ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…ØŸ',
    type: 'select',
    options: ['Ù‚Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©', 'Ù‚Ø±Ø¶ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ', 'Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù†ÙŠØ©', 'Ø£Ø®Ø±Ù‰'],
    show: () => true
  },
  {
    key: 'monthly',
    text: 'ÙƒÙ… Ù‚ÙŠÙ…Ø© Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠØŸ',
    type: 'input',
    placeholder: 'Ù…Ø«Ø§Ù„: 1500',
    show: () => true
  },
  {
    key: 'months',
    text: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ù‡Ø± Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©ØŸ',
    type: 'select',
    options: Array.from({ length: 60 }, (_, i) => `${i + 1}`),
    show: () => true
  },
  {
    key: 'hasFinal',
    text: 'Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø¯ÙØ¹Ø© Ø£Ø®ÙŠØ±Ø©ØŸ',
    type: 'select',
    options: ['Ù†Ø¹Ù…', 'Ù„Ø§'],
    show: (a) => a.type === 'Ù‚Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©'
  },
  {
    key: 'finalAmount',
    text: 'ÙƒÙ… Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©ØŸ',
    type: 'input',
    placeholder: 'Ù…Ø«Ø§Ù„: 45000',
    show: (a) => a.type === 'Ù‚Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©' && a.hasFinal === 'Ù†Ø¹Ù…'
  },
  {
    key: 'another',
    text: 'Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØªØ²Ø§Ù… Ø¢Ø®Ø±ØŸ',
    type: 'select',
    options: ['Ù†Ø¹Ù…', 'Ù„Ø§'],
    show: () => true
  }
];
</script><!-- âœ… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Ù…Ø³: Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø¨Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„ÙƒØ§Ù…Ù„ ÙˆØ§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„ØµÙˆØ±Ø© -->
<div id="resultContainer" style="display:none; text-align:center; direction:rtl; margin-top:30px; font-size:32px;">
  <h3 style="margin-bottom: 0;">Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø­Ø³Ø¨Ø© <span style="color:#666;">(Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©):</span></h3>
  <div id="greeting" style="color:#007bff; font-weight:bold;">Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙˆÙ…Ø³Ù‡Ù„Ø§Ù‹ ÙŠØ§ <span id="clientNameResult"></span></div>
  <div style="margin: 20px 0;">
    <span id="financeDuration"></span>
  </div>
  <div id="retirementSalaryLine" style="margin-bottom: 20px; display:none;">
    <strong>Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ÙŠ Ø§Ù„Ù…Ø­ØªØ³Ø¨ Ù‡Ùˆ:</strong> <span id="retirementSalaryAmount" style="color:#000;">--</span> Ø±ÙŠØ§Ù„
  </div>
  <div id="installmentsDetails" style="margin-bottom: 25px;"></div>

  <div style="color:green; font-weight:bold;">
    Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØµØ§ÙÙŠ Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:
    <span id="netFinanceAfterFees" style="font-size:36px;"></span> Ø±ÙŠØ§Ù„
  </div>

  <div style="margin: 15px 0;">
    Ø¯Ø¹Ù… Ø­ÙƒÙˆÙ…ÙŠ Ù…Ø¶Ø§Ù:
    <span id="govSupport" style="color:#000; font-weight:600;"></span> Ø±ÙŠØ§Ù„
  </div>

  <div style="color:green; margin-bottom: 20px;">
    Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØµØ§ÙÙŠ Ù‚Ø¨Ù„ Ø®ØµÙ… Ø§Ù„Ø±Ø³ÙˆÙ…:
    <span id="netFinanceBeforeFees"></span> Ø±ÙŠØ§Ù„
  </div>

  <div style="color:red; margin-bottom: 8px;">
    Ø§Ù„Ø±Ø¨Ø­ Ø¯ÙˆÙ† Ø§Ù„Ø±Ø³ÙˆÙ…:
    <span id="profitWithoutFees"></span> Ø±ÙŠØ§Ù„
  </div>

  <div style="color:red; margin-bottom: 15px;">
    Ø§Ù„Ø±Ø¨Ø­ Ù…Ø¹ Ø§Ù„Ø±Ø³ÙˆÙ…:
    <span id="profitWithFees" style="font-size:28px;"></span> Ø±ÙŠØ§Ù„
  </div>

  <div style="text-align:right; padding: 0 30px; font-size:28px;">
    <div>Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ø±Ø¨Ø­: <span id="profitRate"></span></div>
    <div>Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©: <span id="adminFees"></span> Ø±ÙŠØ§Ù„</div>
    <div>Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø±Ø³ÙˆÙ…: <span id="vatFees"></span> Ø±ÙŠØ§Ù„</div>
    <div>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ù…Ø¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­: <span id="totalWithProfit"></span> Ø±ÙŠØ§Ù„</div>
    <div>Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù…: <span id="netFinanceAfterFeesText" style="font-weight:600;"></span></div>
  </div>

  <div style="margin:30px 0; font-size:28px;">
    Ø®Ø° Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© ÙˆØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§: <br/>
    <strong>ğŸ“ 0506214458</strong><br/>
    Ø²ÙˆØ±ÙˆØ§ Ù…ÙˆÙ‚Ø¹Ù†Ø§: <strong>hlooleqrr.com</strong>
  </div>

  <div id="resetButtonContainer" style="display:block; margin-bottom: 20px;">
    <button onclick="resetCalc()" style="background:#e8f1fd; color:#007bff; border:none; padding:10px 20px; font-size:28px; border-radius:8px; cursor:pointer;">
      ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø©
    </button>
  </div>

  <footer style="font-size:24px; margin-top: 30px; color:#444;">
    <div id="datetimeFooter">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ©</div>
  </footer>
</div>

<script>
function updateDateTime() {
  const now = new Date();
  const h = String(now.getHours()).padStart(2, '0');
  const m = String(now.getMinutes()).padStart(2, '0');
  const s = String(now.getSeconds()).padStart(2, '0');
  const d = String(now.getDate()).padStart(2, '0');
  const mo = String(now.getMonth() + 1).padStart(2, '0');
  const y = now.getFullYear();
  const hijri = new Intl.DateTimeFormat('ar-TN-u-ca-islamic', { year: 'numeric', month: '2-digit', day: '2-digit' }).format(now);
  document.getElementById("datetimeFooter").innerText =
    `Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ© - Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ: ${hijri} - Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ: ${y}-${mo}-${d} - Ø§Ù„ÙˆÙ‚Øª: ${h}:${m}:${s}`;
}
setInterval(updateDateTime, 1000); updateDateTime();
</script><script>
function handleStartOrReset() {
  if (!hasStarted) {
    hasStarted = true;
    document.getElementById('mainButton').style.display = 'none';
    document.getElementById('resetButtonContainer').style.display = 'block';
    showQuestion();
  } else {
    resetCalc();
  }
}

function resetCalc() {
  answers = { commitments: [] };
  step = commitmentStep = 0;
  currentCommitment = {};
  hasStarted = true;
  document.getElementById('mainButton').style.display = 'none';
  document.getElementById('resetButtonContainer').style.display = 'block';
  document.getElementById('resultContainer').style.display = 'none';
  showQuestion();
}

function showQuestion() {
  const container = document.getElementById('question');
  container.innerHTML = '';
  document.getElementById('nextContainer').style.display = 'block';
  let q;
  if (step < generalQuestions.length) {
    q = generalQuestions[step];
    if (q.show && !q.show(answers)) {
      step++;
      showQuestion();
      return;
    }
  } else if (answers.hasCommitments === 'Ù†Ø¹Ù…') {
    q = commitmentQuestions[commitmentStep];
    if (q.show && !q.show(currentCommitment)) {
      commitmentStep++;
      showQuestion();
      return;
    }
  } else {
    calculateResult();
    return;
  }

  const label = document.createElement('label');
  label.innerText = q.text;
  container.appendChild(label);

  if (q.type === 'input') {
    const input = document.createElement('input');
    input.placeholder = q.placeholder || '';
    input.type = 'text';
    input.oninput = (e) => {
      if (step < generalQuestions.length) answers[q.key] = e.target.value;
      else currentCommitment[q.key] = e.target.value;
    };
    container.appendChild(input);
  } else if (q.type === 'select') {
    const select = document.createElement('select');
    q.options.forEach(opt => {
      const option = document.createElement('option');
      option.value = opt;
      option.innerText = opt;
      select.appendChild(option);
    });
    select.onchange = (e) => {
      if (step < generalQuestions.length) answers[q.key] = e.target.value;
      else currentCommitment[q.key] = e.target.value;
    };
    container.appendChild(select);
  }
}

function nextQuestion() {
  if (step < generalQuestions.length) {
    step++;
  } else if (answers.hasCommitments === 'Ù†Ø¹Ù…') {
    const current = commitmentQuestions[commitmentStep];
    if (current.key === 'another' && currentCommitment.another === 'Ù„Ø§') {
      answers.commitments.push(currentCommitment);
      answers.hasCommitments = 'Ù„Ø§';
      calculateResult();
      return;
    } else if (current.key === 'another' && currentCommitment.another === 'Ù†Ø¹Ù…') {
      answers.commitments.push(currentCommitment);
      currentCommitment = {};
      commitmentStep = 0;
      showQuestion();
      return;
    }
    commitmentStep++;
  }
  showQuestion();
}
</script>