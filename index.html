<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>حاسبة الراتب التقاعدي - تجريبي</title>
<style>
  body { font-family: 'Tajawal', sans-serif; padding: 20px; max-width: 600px; margin:auto; background:#e8f5f2; color:#012a26; }
  h1 { text-align:center; color:#004d40; }
  label { margin-top:15px; display:block; font-weight:bold; }
  select, button { width: 100%; padding: 10px; font-size: 18px; margin-top: 5px; border-radius: 5px; border:1px solid #004d40; }
  #result { margin-top: 25px; font-size: 20px; color:#00695c; }
</style>
</head>
<body>

<h1>حاسبة الراتب التقاعدي للعسكريين</h1>

<label>اختر رتبتك:</label>
<select id="rank">
  <option value="">-- اختر --</option>
  <option value="جندي">جندي</option>
  <option value="عريف">عريف</option>
  <option value="وكيل رقيب">وكيل رقيب</option>
  <option value="رقيب">رقيب</option>
  <option value="رقيب أول">رقيب أول</option>
  <option value="رئيس رقباء">رئيس رقباء</option>
  <option value="ملازم">ملازم</option>
  <option value="نقيب">نقيب</option>
  <option value="رائد">رائد</option>
  <option value="مقدم">مقدم</option>
  <option value="عقيد">عقيد</option>
  <option value="عميد">عميد</option>
  <option value="لواء">لواء</option>
</select>

<label>تاريخ الميلاد هجري (سنة):</label>
<select id="birthYear"></select>

<label>تاريخ التعيين هجري (سنة):</label>
<select id="hireYear"></select>

<button id="calculateBtn">احسب</button>

<div id="result"></div>

<script>
  // تعبئة السنوات فقط للبساطة
  const birthYearSelect = document.getElementById('birthYear');
  const hireYearSelect = document.getElementById('hireYear');

  for(let y=1370; y<=1430; y++){
    birthYearSelect.appendChild(new Option(y,y));
  }
  for(let y=1410; y<=1460; y++){
    hireYearSelect.appendChild(new Option(y,y));
  }

  const ranksData = {
    "جندي": { base: 3220, allowance: 125, maxYears: 15, retireAge: 44 },
    "عريف": { base: 3765, allowance: 150, maxYears: 15, retireAge: 46 },
    "وكيل رقيب": { base: 4455, allowance: 180, maxYears: 15, retireAge: 46 },
    "رقيب": { base: 5260, allowance: 215, maxYears: 15, retireAge: 48 },
    "رقيب أول": { base: 6180, allowance: 260, maxYears: 15, retireAge: 50 },
    "رئيس رقباء": { base: 7215, allowance: 310, maxYears: 15, retireAge: 52 },
    "ملازم": { base: 7590, allowance: 380, maxYears: 15, retireAge: 48 },
    "نقيب": { base: 9215, allowance: 230, maxYears: 15, retireAge: 52 },
    "رائد": { base: 11705, allowance: 230, maxYears: 15, retireAge: 54 },
    "مقدم": { base: 12735, allowance: 230, maxYears: 15, retireAge: 55 },
    "عقيد": { base: 14365, allowance: 230, maxYears: 15, retireAge: 56 },
    "عميد": { base: 16350, allowance: 210, maxYears: 15, retireAge: 57 },
    "لواء": { base: 18600, allowance: 200, maxYears: 15, retireAge: 58 }
  };

  function calculate(){
    const rank = document.getElementById('rank').value;
    const birthYear = parseInt(document.getElementById('birthYear').value);
    const hireYear = parseInt(document.getElementById('hireYear').value);

    if(!rank || !birthYear || !hireYear){
      alert('يرجى تعبئة جميع الحقول');
      return;
    }
    if(hireYear < birthYear){
      alert('تاريخ التعيين لا يمكن أن يكون قبل تاريخ الميلاد');
      return;
    }

    const data = ranksData[rank];
    // سنوات الخدمة
    const serviceYears = new Date().getFullYear() - hireYear; // الميلادي لكنه تقريبي، لكن لدينا هجري سنستخدم الفرق بين سنوات فقط
    // حساب سنوات العلاوة محدودة ب maxYears
    const allowanceYears = Math.min(serviceYears, data.maxYears);

    const baseSalary = data.base + allowanceYears * data.allowance;
    const pension = Math.round((baseSalary * serviceYears * 0.55) / 40);

    // عمر التقاعد (هجري)
    const retireAge = data.retireAge;
    const retireYear = birthYear + retireAge;

    // العمر المتوقع عند التقاعد
    const ageAtRetire = retireAge;

    // النتيجة
    const result = `
      <p>رتبتك: <b>${rank}</b></p>
      <p>سنوات الخدمة: <b>${serviceYears}</b></p>
      <p>الراتب الأساسي (تقديري): <b>${baseSalary.toLocaleString('ar-EG')} ريال</b></p>
      <p>الراتب التقاعدي المتوقع: <b>${pension.toLocaleString('ar-EG')} ريال</b></p>
      <p>تاريخ التقاعد المتوقع (هجري): <b>${retireYear} هـ</b></p>
      <p>عمر التقاعد المتوقع: <b>${ageAtRetire} سنة</b></p>
      <p><i>ملاحظة: صرف الراتب يبدأ بعد شهرين من تاريخ التقاعد.</i></p>
    `;
    document.getElementById('result').innerHTML = result;
  }

  document.getElementById('calculateBtn').addEventListener('click', calculate);
</script>

</body>
</html>