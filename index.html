<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>حاسبة الراتب التقاعدي للعسكريين</title>
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      background: linear-gradient(135deg, #e0f7fa, #ffffff);
      margin: 0; padding: 0; text-align: center; font-size: 26px;
    }
    header {
      background: #004d40; color: #ffffff;
      padding: 30px 15px;
      font-size: 32px; font-weight: bold;
    }
    .container {
      max-width: 750px; margin: 30px auto;
      background: #ffffff; padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    select, button {
      width: 92%; padding: 15px; font-size: 24px;
      margin: 15px 0; border-radius: 8px;
    }
    label { display: block; margin: 15px 0 5px; font-weight: bold; }
    footer {
      margin-top: 50px;
      padding: 15px;
      font-size: 20px;
      color: gray;
      background: #f1f1f1;
    }
  </style>
</head>
<body>

  <header>سرعة تملك العقار والحلول التمويلية<br>حاسبة الراتب التقاعدي للعسكريين</header>

  <div class="container">
    <form id="pensionForm">

      <!-- الرتبة -->
      <label for="rank">🎖️ اختر الرتبة العسكرية:</label>
      <select id="rank" required>
        <option value="">-- اختر الرتبة --</option>
        <option value="جندي">جندي</option>
        <option value="جندي أول">جندي أول</option>
        <option value="عريف">عريف</option>
        <option value="وكيل رقيب">وكيل رقيب</option>
        <option value="رقيب">رقيب</option>
        <option value="رقيب أول">رقيب أول</option>
        <option value="رئيس رقباء">رئيس رقباء</option>
        <option value="ملازم">ملازم</option>
        <option value="ملازم أول">ملازم أول</option>
        <option value="نقيب">نقيب</option>
        <option value="رائد">رائد</option>
        <option value="مقدم">مقدم</option>
        <option value="عقيد">عقيد</option>
        <option value="عميد">عميد</option>
        <option value="لواء">لواء</option>
      </select>

      <!-- تاريخ الميلاد -->
      <label>📅 تاريخ الميلاد (هجري):</label>
      <select id="birthDay"></select>
      <select id="birthMonth"></select>
      <select id="birthYear"></select>

      <!-- تاريخ التعيين -->
      <label>📅 تاريخ التعيين (هجري):</label>
      <select id="hireDay"></select>
      <select id="hireMonth"></select>
      <select id="hireYear"></select>

      <!-- زر التالي -->
      <button type="submit">احسب الراتب التقاعدي</button>

    </form>
  </div>

  <footer id="footer"></footer>

  <script>
    // تعبئة التواريخ
    function fillSelects() {
      const days = [...Array(30).keys()].map(i => i + 1);
      const months = [...Array(12).keys()].map(i => i + 1);
      const birthYears = [...Array(60).keys()].map(i => 1370 + i);  // من 1370 إلى 1430
      const hireYears = [...Array(50).keys()].map(i => 1410 + i);   // من 1410 إلى 1460

      const fill = (id, array) => {
        const el = document.getElementById(id);
        array.forEach(val => {
          const opt = document.createElement('option');
          opt.value = val; opt.textContent = val;
          el.appendChild(opt);
        });
      };

      fill('birthDay', days);
      fill('birthMonth', months);
      fill('birthYear', birthYears);

      fill('hireDay', days);
      fill('hireMonth', months);
      fill('hireYear', hireYears);

      // تعيين قيم افتراضية
      document.getElementById('birthYear').value = 1400;
      document.getElementById('birthMonth').value = 1;
      document.getElementById('birthDay').value = 1;

      document.getElementById('hireYear').value = 1430;
      document.getElementById('hireMonth').value = 1;
      document.getElementById('hireDay').value = 1;
    }

    // الفوتر: التاريخ الهجري والميلادي والوقت الحالي
    function updateFooter() {
      const now = new Date();
      const miladi = now.toLocaleDateString('ar-SA', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
      const time = now.toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit' });
      const hijri = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', {
        day: 'numeric', month: 'long', year: 'numeric'
      }).format(now);

      document.getElementById('footer').innerHTML =
        `📅 التاريخ الميلادي: ${miladi} <br> 📆 التاريخ الهجري: ${hijri} <br> 🕒 الوقت الآن: ${time}`;
    }

    fillSelects();
    updateFooter();
  </script>

</body>
</html>// مربوط الدرجة الأولى + قيمة العلاوة السنوية + عدد سنوات العلاوة
const ranksData = {
  "جندي":        { base: 3220,  allowance: 125,  maxYears: 15 },
  "جندي أول":    { base: 3395,  allowance: 135,  maxYears: 15 },
  "عريف":        { base: 3765,  allowance: 150,  maxYears: 15 },
  "وكيل رقيب":   { base: 4455,  allowance: 180,  maxYears: 15 },
  "رقيب":        { base: 5260,  allowance: 215,  maxYears: 15 },
  "رقيب أول":    { base: 6180,  allowance: 260,  maxYears: 15 },
  "رئيس رقباء":  { base: 7215,  allowance: 310,  maxYears: 15 },
  "ملازم":       { base: 7590,  allowance: 380,  maxYears: 15 },
  "ملازم أول":   { base: 8365,  allowance: 395,  maxYears: 15 },
  "نقيب":        { base: 9215,  allowance: 230,  maxYears: 15 },
  "رائد":        { base: 11705, allowance: 230,  maxYears: 15 },
  "مقدم":        { base: 12735, allowance: 230,  maxYears: 15 },
  "عقيد":        { base: 14365, allowance: 230,  maxYears: 15 },
  "عميد":        { base: 16350, allowance: 210,  maxYears: 15 },
  "لواء":        { base: 18600, allowance: 200,  maxYears: 15 }
};

// تحويل التاريخ الهجري إلى عدد أشهر منذ 1370/01
function hijriToMonths(y, m, d) {
  return (y - 1370) * 12 + (m - 1);
}

// حساب عدد سنوات الخدمة
function calculateYearsOfService(hireY, hireM, birthY, birthM) {
  const today = new Date();
  const todayHijriYear = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', { year: 'numeric' }).format(today);
  const todayHijriMonth = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', { month: 'numeric' }).format(today);

  const start = hijriToMonths(parseInt(hireY), parseInt(hireM));
  const end = hijriToMonths(parseInt(todayHijriYear), parseInt(todayHijriMonth));
  const totalMonths = end - start;
  return Math.floor(totalMonths / 12);
}

// تحويل رقم إلى نص عربي
function convertToArabicWords(number) {
  const formatter = new Intl.NumberFormat('ar-EG');
  return formatter.format(number).replace(/,/g, ',');
}

// حساب الراتب التقاعدي عند إرسال النموذج
document.getElementById('pensionForm').addEventListener('submit', function(e) {
  e.preventDefault();

  const rank = document.getElementById('rank').value;
  const birthY = parseInt(document.getElementById('birthYear').value);
  const hireY = parseInt(document.getElementById('hireYear').value);

  const hireM = parseInt(document.getElementById('hireMonth').value);
  const birthM = parseInt(document.getElementById('birthMonth').value);

  if (!rank || !ranksData[rank]) return alert("الرجاء اختيار رتبة صحيحة");

  const serviceYears = calculateYearsOfService(hireY, hireM, birthY, birthM);
  const maxYears = ranksData[rank].maxYears;
  const actualYears = Math.min(serviceYears, maxYears);

  const base = ranksData[rank].base;
  const allowance = ranksData[rank].allowance;
  const totalBasic = base + (actualYears * allowance);

  const pension = Math.round((totalBasic * serviceYears * 0.55) / 40);

  const result = `
    <div style="font-size: 28px; margin-top: 30px;">
      ✅ <strong>الرتبة:</strong> ${rank}<br>
      🧾 <strong>سنوات الخدمة:</strong> ${serviceYears} سنة<br>
      💰 <strong>الراتب الأساسي التقديري:</strong> ${convertToArabicWords(totalBasic)} ريال<br>
      🧮 <strong>الراتب التقاعدي:</strong> ${convertToArabicWords(pension)} ريال
    </div>
  `;

  document.querySelector('.container').innerHTML += result;
});