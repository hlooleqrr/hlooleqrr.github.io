<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ÙŠ Ù„Ù„Ø¹Ø³ÙƒØ±ÙŠÙŠÙ†</title>
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      background: linear-gradient(135deg, #e0f7fa, #ffffff);
      margin: 0; padding: 0; text-align: center; font-size: 26px;
    }
    header {
      background: #004d40; color: #ffffff;
      padding: 30px 15px;
      font-size: 32px; font-weight: bold;
    }
    .container {
      max-width: 750px; margin: 30px auto;
      background: #ffffff; padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    select, button {
      width: 92%; padding: 15px; font-size: 24px;
      margin: 15px 0; border-radius: 8px;
    }
    label { display: block; margin: 15px 0 5px; font-weight: bold; }
    footer {
      margin-top: 50px;
      padding: 15px;
      font-size: 20px;
      color: gray;
      background: #f1f1f1;
    }
  </style>
</head>
<body>

  <header>Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ©<br>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ÙŠ Ù„Ù„Ø¹Ø³ÙƒØ±ÙŠÙŠÙ†</header>

  <div class="container">
    <form id="pensionForm">

      <!-- Ø§Ù„Ø±ØªØ¨Ø© -->
      <label for="rank">ğŸ–ï¸ Ø§Ø®ØªØ± Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©:</label>
      <select id="rank" required>
        <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø±ØªØ¨Ø© --</option>
        <option value="Ø¬Ù†Ø¯ÙŠ">Ø¬Ù†Ø¯ÙŠ</option>
        <option value="Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„">Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„</option>
        <option value="Ø¹Ø±ÙŠÙ">Ø¹Ø±ÙŠÙ</option>
        <option value="ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨">ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨</option>
        <option value="Ø±Ù‚ÙŠØ¨">Ø±Ù‚ÙŠØ¨</option>
        <option value="Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„">Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„</option>
        <option value="Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡">Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡</option>
        <option value="Ù…Ù„Ø§Ø²Ù…">Ù…Ù„Ø§Ø²Ù…</option>
        <option value="Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„">Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„</option>
        <option value="Ù†Ù‚ÙŠØ¨">Ù†Ù‚ÙŠØ¨</option>
        <option value="Ø±Ø§Ø¦Ø¯">Ø±Ø§Ø¦Ø¯</option>
        <option value="Ù…Ù‚Ø¯Ù…">Ù…Ù‚Ø¯Ù…</option>
        <option value="Ø¹Ù‚ÙŠØ¯">Ø¹Ù‚ÙŠØ¯</option>
        <option value="Ø¹Ù…ÙŠØ¯">Ø¹Ù…ÙŠØ¯</option>
        <option value="Ù„ÙˆØ§Ø¡">Ù„ÙˆØ§Ø¡</option>
      </select>

      <!-- ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ -->
      <label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ (Ù‡Ø¬Ø±ÙŠ):</label>
      <select id="birthDay"></select>
      <select id="birthMonth"></select>
      <select id="birthYear"></select>

      <!-- ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹ÙŠÙŠÙ† -->
      <label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹ÙŠÙŠÙ† (Ù‡Ø¬Ø±ÙŠ):</label>
      <select id="hireDay"></select>
      <select id="hireMonth"></select>
      <select id="hireYear"></select>

      <!-- Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ -->
      <button type="submit">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ÙŠ</button>

    </form>
  </div>

  <footer id="footer"></footer>

  <script>
    // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®
    function fillSelects() {
      const days = [...Array(30).keys()].map(i => i + 1);
      const months = [...Array(12).keys()].map(i => i + 1);
      const birthYears = [...Array(60).keys()].map(i => 1370 + i);  // Ù…Ù† 1370 Ø¥Ù„Ù‰ 1430
      const hireYears = [...Array(50).keys()].map(i => 1410 + i);   // Ù…Ù† 1410 Ø¥Ù„Ù‰ 1460

      const fill = (id, array) => {
        const el = document.getElementById(id);
        array.forEach(val => {
          const opt = document.createElement('option');
          opt.value = val; opt.textContent = val;
          el.appendChild(opt);
        });
      };

      fill('birthDay', days);
      fill('birthMonth', months);
      fill('birthYear', birthYears);

      fill('hireDay', days);
      fill('hireMonth', months);
      fill('hireYear', hireYears);

      // ØªØ¹ÙŠÙŠÙ† Ù‚ÙŠÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
      document.getElementById('birthYear').value = 1400;
      document.getElementById('birthMonth').value = 1;
      document.getElementById('birthDay').value = 1;

      document.getElementById('hireYear').value = 1430;
      document.getElementById('hireMonth').value = 1;
      document.getElementById('hireDay').value = 1;
    }

    // Ø§Ù„ÙÙˆØªØ±: Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ ÙˆØ§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ ÙˆØ§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
    function updateFooter() {
      const now = new Date();
      const miladi = now.toLocaleDateString('ar-SA', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
      const time = now.toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit' });
      const hijri = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', {
        day: 'numeric', month: 'long', year: 'numeric'
      }).format(now);

      document.getElementById('footer').innerHTML =
        `ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ: ${miladi} <br> ğŸ“† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ: ${hijri} <br> ğŸ•’ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¢Ù†: ${time}`;
    }

    fillSelects();
    updateFooter();
  </script>

</body>
</html>// Ù…Ø±Ø¨ÙˆØ· Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ + Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ù„Ø§ÙˆØ© Ø§Ù„Ø³Ù†ÙˆÙŠØ© + Ø¹Ø¯Ø¯ Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø¹Ù„Ø§ÙˆØ©
const ranksData = {
  "Ø¬Ù†Ø¯ÙŠ":        { base: 3220,  allowance: 125,  maxYears: 15 },
  "Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„":    { base: 3395,  allowance: 135,  maxYears: 15 },
  "Ø¹Ø±ÙŠÙ":        { base: 3765,  allowance: 150,  maxYears: 15 },
  "ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨":   { base: 4455,  allowance: 180,  maxYears: 15 },
  "Ø±Ù‚ÙŠØ¨":        { base: 5260,  allowance: 215,  maxYears: 15 },
  "Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„":    { base: 6180,  allowance: 260,  maxYears: 15 },
  "Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡":  { base: 7215,  allowance: 310,  maxYears: 15 },
  "Ù…Ù„Ø§Ø²Ù…":       { base: 7590,  allowance: 380,  maxYears: 15 },
  "Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„":   { base: 8365,  allowance: 395,  maxYears: 15 },
  "Ù†Ù‚ÙŠØ¨":        { base: 9215,  allowance: 230,  maxYears: 15 },
  "Ø±Ø§Ø¦Ø¯":        { base: 11705, allowance: 230,  maxYears: 15 },
  "Ù…Ù‚Ø¯Ù…":        { base: 12735, allowance: 230,  maxYears: 15 },
  "Ø¹Ù‚ÙŠØ¯":        { base: 14365, allowance: 230,  maxYears: 15 },
  "Ø¹Ù…ÙŠØ¯":        { base: 16350, allowance: 210,  maxYears: 15 },
  "Ù„ÙˆØ§Ø¡":        { base: 18600, allowance: 200,  maxYears: 15 }
};

// ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ Ø£Ø´Ù‡Ø± Ù…Ù†Ø° 1370/01
function hijriToMonths(y, m, d) {
  return (y - 1370) * 12 + (m - 1);
}

// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¯Ù…Ø©
function calculateYearsOfService(hireY, hireM, birthY, birthM) {
  const today = new Date();
  const todayHijriYear = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', { year: 'numeric' }).format(today);
  const todayHijriMonth = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', { month: 'numeric' }).format(today);

  const start = hijriToMonths(parseInt(hireY), parseInt(hireM));
  const end = hijriToMonths(parseInt(todayHijriYear), parseInt(todayHijriMonth));
  const totalMonths = end - start;
  return Math.floor(totalMonths / 12);
}

// ØªØ­ÙˆÙŠÙ„ Ø±Ù‚Ù… Ø¥Ù„Ù‰ Ù†Øµ Ø¹Ø±Ø¨ÙŠ
function convertToArabicWords(number) {
  const formatter = new Intl.NumberFormat('ar-EG');
  return formatter.format(number).replace(/,/g, ',');
}

// Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ÙŠ Ø¹Ù†Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
document.getElementById('pensionForm').addEventListener('submit', function(e) {
  e.preventDefault();

  const rank = document.getElementById('rank').value;
  const birthY = parseInt(document.getElementById('birthYear').value);
  const hireY = parseInt(document.getElementById('hireYear').value);

  const hireM = parseInt(document.getElementById('hireMonth').value);
  const birthM = parseInt(document.getElementById('birthMonth').value);

  if (!rank || !ranksData[rank]) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø±ØªØ¨Ø© ØµØ­ÙŠØ­Ø©");

  const serviceYears = calculateYearsOfService(hireY, hireM, birthY, birthM);
  const maxYears = ranksData[rank].maxYears;
  const actualYears = Math.min(serviceYears, maxYears);

  const base = ranksData[rank].base;
  const allowance = ranksData[rank].allowance;
  const totalBasic = base + (actualYears * allowance);

  const pension = Math.round((totalBasic * serviceYears * 0.55) / 40);

  const result = `
    <div style="font-size: 28px; margin-top: 30px;">
      âœ… <strong>Ø§Ù„Ø±ØªØ¨Ø©:</strong> ${rank}<br>
      ğŸ§¾ <strong>Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¯Ù…Ø©:</strong> ${serviceYears} Ø³Ù†Ø©<br>
      ğŸ’° <strong>Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ:</strong> ${convertToArabicWords(totalBasic)} Ø±ÙŠØ§Ù„<br>
      ğŸ§® <strong>Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ÙŠ:</strong> ${convertToArabicWords(pension)} Ø±ÙŠØ§Ù„
    </div>
  `;

  document.querySelector('.container').innerHTML += result;
});