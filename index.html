<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ©</title>
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      background: #f4f6f8;
      margin: 0;
      text-align: center;
      font-size: 32px;
    }
    header {
      background: #005c48;
      color: #fff;
      padding: 25px;
      font-size: 40px;
    }
    h2 {
      font-size: 32px;
      margin: 10px 0 20px;
    }
    .container {
      max-width: 650px;
      margin: 0 auto 25px;
      background: #fff;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,.1);
    }
    input, select, button {
      width: 92%;
      padding: 20px;
      margin: 18px 0;
      font-size: 32px;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    .result p { margin: 12px 0; }
    .highlight { color: #2e7d32; font-size: 36px; }
  </style>
</head>
<body>
  <header>Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ©</header>
  <h2>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©</h2>
  <div class="container">
    <div id="question"></div>
    <button id="mainButton" onclick="handleStartOrReset()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø³Ø¨Ø©</button>
    <div id="resetButtonContainer" style="display:none;">
      <button onclick="handleStartOrReset()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø© ğŸ”</button>
    </div>
    <div id="nextContainer" style="display:none;">
      <button onclick="nextQuestion()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
  </div>

<script>
let hasStarted = false;
let step = 0;
let commitmentStep = 0;
let answers = { commitments: [] };
let currentCommitment = {};

const generalQuestions = [
  { id: 'financeType', label: 'Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ØªØ±ÙŠØ¯ Ø­Ø³Ø¨ØªÙ‡:', type: 'select', options: ['ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ', 'ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ Ø£Ùˆ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ'] },
  { id: 'clientName', label: 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙŠÙ…:', type: 'text' },
  { show: a => a.financeType === 'ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ', id: 'supported', label: 'Ù‡Ù„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ù…Ø¯Ø¹ÙˆÙ… Ø£Ù… ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…ØŸ', type: 'select', options: ['Ù…Ø¯Ø¹ÙˆÙ…', 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…'] },
  { show: a => a.financeType === 'ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ' && a.supported === 'Ù…Ø¯Ø¹ÙˆÙ…', id: 'bundle', label: 'Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ø¯ÙØ¹Ø© Ù…Ù‚Ø¯Ù…Ø© Ù…Ù† Ø³ÙƒÙ†ÙŠØŸ', type: 'select', options: ['Ù†Ø¹Ù…', 'Ù„Ø§'] },
  { id: 'salary', label: 'Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ (Ø±ÙŠØ§Ù„):', type: 'number' },
  { id: 'profitMargin', label: 'Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­ (%):', type: 'number', default: '4.5' },
  { id: 'months', label: 'Ø¹Ø¯Ø¯ Ø£Ø´Ù‡Ø± Ø§Ù„ØªÙ…ÙˆÙŠÙ„:', type: 'select', dynamic: true },
  { id: 'jobType', label: 'Ù†ÙˆØ¹ Ø§Ù„ÙˆØ¸ÙŠÙØ©:', type: 'select', options: ['Ø¹Ø³ÙƒØ±ÙŠ','Ù…Ø¯Ù†ÙŠ','Ø®Ø§Øµ Ø´Ø¨Ù‡ Ø­ÙƒÙˆÙ…ÙŠ','Ø®Ø§Øµ Ù…Ø¹ØªÙ…Ø¯','Ø®Ø§Øµ ØºÙŠØ± Ù…Ø¹ØªÙ…Ø¯'] },
  { id: 'birthHijriYear', label: 'Ø§Ø®ØªØ± Ø³Ù†Ø© Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ Ø¨Ø§Ù„Ù‡Ø¬Ø±ÙŠ:', type: 'select', options: Array.from({length:61},(_,i)=>(1370+i).toString()) },
  { show: a => a.jobType === 'Ø¹Ø³ÙƒØ±ÙŠ', id: 'rank', label: 'Ø­Ø¯Ø¯ Ø±ØªØ¨ØªÙƒ Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©:', type: 'select', options: ['Ø¬Ù†Ø¯ÙŠ','Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„','Ø¹Ø±ÙŠÙ','ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨','Ø±Ù‚ÙŠØ¨','Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„','Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡','Ù…Ù„Ø§Ø²Ù…','Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„','Ù†Ù‚ÙŠØ¨','Ø±Ø§Ø¦Ø¯','Ù…Ù‚Ø¯Ù…','Ø¹Ù‚ÙŠØ¯','Ø¹Ù…ÙŠØ¯','Ù„ÙˆØ§Ø¡'] },
  { id: 'hasCommitments', label: 'Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù…Ø§Ù„ÙŠØ©ØŸ', type: 'select', options: ['Ù†Ø¹Ù…','Ù„Ø§'] },
];

const commitmentQuestions = [
  { id: 'type', label: 'Ù†ÙˆØ¹ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…:', type: 'select', options: ['Ù‚Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©','Ù‚Ø±Ø¶ Ø´Ø®ØµÙŠ','Ù‚Ø±Ø¶ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ'] },
  { id: 'amount', label: 'Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ù„Ù„Ù‚Ø³Ø· (Ø±ÙŠØ§Ù„):', type: 'number' },
  { id: 'months', label: 'Ø¹Ø¯Ø¯ Ø£Ø´Ù‡Ø± Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:', type: 'select', dynamic: true },
  { id: 'balloon', label: 'Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø¯ÙØ¹Ø© Ø£Ø®ÙŠØ±Ø©ØŸ', type: 'select', options: ['Ù†Ø¹Ù…','Ù„Ø§'] },
  { show: c=>c.balloon==='Ù†Ø¹Ù…', id: 'balloonAmount', label: 'Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø© (Ø±ÙŠØ§Ù„):', type: 'number' },
  { id: 'more', label: 'Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØªØ²Ø§Ù… Ø¢Ø®Ø±ØŸ', type: 'select', options: ['Ù†Ø¹Ù…','Ù„Ø§'] },
];

function getMaxAllowedMonths(){
  const currentHijriYear = 1446;
  const birthYear = parseInt(answers.birthHijriYear);
  const ageNow = currentHijriYear - birthYear;
  const ranks = {"Ø¬Ù†Ø¯ÙŠ":44,"Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„":44,"Ø¹Ø±ÙŠÙ":46,"ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨":46,"Ø±Ù‚ÙŠØ¨":48,"Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„":50,"Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡":52,"Ù…Ù„Ø§Ø²Ù…":48,"Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„":50,"Ù†Ù‚ÙŠØ¨":52,"Ø±Ø§Ø¦Ø¯":54,"Ù…Ù‚Ø¯Ù…":56,"Ø¹Ù‚ÙŠØ¯":58,"Ø¹Ù…ÙŠØ¯":60,"Ù„ÙˆØ§Ø¡":60};
  const retireAge = answers.jobType==='Ø¹Ø³ÙƒØ±ÙŠ'? (ranks[answers.rank]||60):60;
  const remainYears = retireAge - ageNow;
  const max = remainYears*12;
  return answers.financeType.includes('Ø´Ø®ØµÙŠ')||answers.financeType.includes('Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ')? Math.min(max,60): Math.min(max,360);
}

function describeMonths(m){
  const y=Math.floor(m/12), mm=m%12;
  let txt=`${m} Ø´Ù‡Ø±`;
  if(y>0||mm>0){
    txt+=' (';
    if(y>0) txt+=`${y} Ø³Ù†Ø©${y>1?'Ø§Øª':''}`;
    if(y>0&&mm>0) txt+=' Ùˆ';
    if(mm>0) txt+=`${mm} Ø´Ù‡Ø±`;
    txt+=')';
  }
  return txt;
}

function numberToArabicWords(num){
  const ones=['','ÙˆØ§Ø­Ø¯','Ø§Ø«Ù†Ø§Ù†','Ø«Ù„Ø§Ø«Ø©','Ø£Ø±Ø¨Ø¹Ø©','Ø®Ù…Ø³Ø©','Ø³ØªØ©','Ø³Ø¨Ø¹Ø©','Ø«Ù…Ø§Ù†ÙŠØ©','ØªØ³Ø¹Ø©'];
  const teens=['Ø¹Ø´Ø±Ø©','Ø¥Ø­Ø¯Ù‰ Ø¹Ø´Ø±','Ø§Ø«Ù†Ø§ Ø¹Ø´Ø±','Ø«Ù„Ø§Ø«Ø© Ø¹Ø´Ø±','Ø£Ø±Ø¨Ø¹Ø© Ø¹Ø´Ø±','Ø®Ù…Ø³Ø© Ø¹Ø´Ø±','Ø³ØªØ© Ø¹Ø´Ø±','Ø³Ø¨Ø¹Ø© Ø¹Ø´Ø±','Ø«Ù…Ø§Ù†ÙŠØ© Ø¹Ø´Ø±','ØªØ³Ø¹Ø© Ø¹Ø´Ø±'];
  const tens=['','','Ø¹Ø´Ø±ÙˆÙ†','Ø«Ù„Ø§Ø«ÙˆÙ†','Ø£Ø±Ø¨Ø¹ÙˆÙ†','Ø®Ù…Ø³ÙˆÙ†','Ø³ØªÙˆÙ†','Ø³Ø¨Ø¹ÙˆÙ†','Ø«Ù…Ø§Ù†ÙˆÙ†','ØªØ³Ø¹ÙˆÙ†'];
  const hundreds=['','Ù…Ø§Ø¦Ø©','Ù…Ø§Ø¦ØªØ§Ù†','Ø«Ù„Ø§Ø«Ù…Ø§Ø¦Ø©','Ø£Ø±Ø¨Ø¹Ù…Ø§Ø¦Ø©','Ø®Ù…Ø³Ù…Ø§Ø¦Ø©','Ø³ØªÙ…Ø§Ø¦Ø©','Ø³Ø¨Ø¹Ù…Ø§Ø¦Ø©','Ø«Ù…Ø§Ù†Ù…Ø§Ø¦Ø©','ØªØ³Ø¹Ù…Ø§Ø¦Ø©'];
  let parts=[];
  if(num>=100){const h=Math.floor(num/100); parts.push(hundreds[h]); num%=100;}
  if(num>=20){const t=Math.floor(num/10); parts.push(tens[t]); num%=10;}
  else if(num>=10){parts.push(teens[num-10]); num=0;}
  if(num>0) parts.push(ones[num]);
  return parts.join(' Ùˆ ');
}

function handleStartOrReset(){
  if(!hasStarted){
    hasStarted=true;
    document.getElementById('mainButton').style.display='none';
    document.getElementById('resetButtonContainer').style.display='block';
    showQuestion();
  } else { resetCalc(); }
}

function resetCalc(){
  answers={commitments:[]};
  step=commitmentStep=0;
  currentCommitment={};
  hasStarted=true;
  document.getElementById('mainButton').style.display='none';
  document.getElementById('resetButtonContainer').style.display='block';
  showQuestion();
}

function showQuestion(){
  const cont=document.getElementById('question');
  cont.innerHTML='';
  document.getElementById('nextContainer').style.display='block';
  let q;
  if(step<generalQuestions.length){
    q=generalQuestions[step];
    if(q.show&&!q.show(answers)){ step++; showQuestion(); return; }
  } else if(answers.hasCommitments==='Ù†Ø¹Ù…'){
    q=commitmentQuestions[commitmentStep];
    if(q.show&&!q.show(currentCommitment)){ commitmentStep++; showQuestion(); return; }
  } else {
    document.getElementById('nextContainer').style.display='none';
    calculate(); return;
  }
  const div=document.createElement('div');
  div.innerHTML=`<label>${q.label}</label><br>`;
  if(q.type==='select'){
    const sel=document.createElement('select'); sel.id=q.id;
    sel.innerHTML='<option value="">Ø§Ø®ØªØ±...</option>';
    if(q.dynamic){
      const lim=getMaxAllowedMonths();
      for(let i=1;i<=lim;i++) sel.innerHTML+=`<option value="${i}">${i} Ø´Ù‡Ø±</option>`;
    } else {
      q.options.forEach(o=>sel.innerHTML+=`<option value="${o}">${o}</option>`);
    }
    div.appendChild(sel);
  } else {
    div.innerHTML+=`<input type="${q.type}" id="${q.id}" ${q.default?`value="${q.default}"`:''}>`;
  }
  cont.appendChild(div);
}

function nextQuestion(){
  const q=step<generalQuestions.length? generalQuestions[step]: commitmentQuestions[commitmentStep];
  const el=document.getElementById(q.id), val=el.value;
  if(!val){alert('ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚Ù„ Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©'); return;}
  if(step<generalQuestions.length){
    answers[q.id]=val;
    if(q.id==='months'){
      const mx=getMaxAllowedMonths();
      if(parseInt(val)>mx){
        alert(`Ø£Ù‚ØµÙ‰ Ù…Ø¯Ø© Ù…Ø³Ù…ÙˆØ­Ø© Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù…Ø± ÙˆØ§Ù„ØªÙ‚Ø§Ø¹Ø¯: ${describeMonths(mx)}.`);
        answers[q.id]=mx.toString();
      }
    }
    step++;
  } else {
    if(q.id==='months') currentCommitment[q.id]=parseInt(val);
    else if(q.id==='amount'||q.id==='balloonAmount') currentCommitment[q.id]=parseFloat(val);
    else currentCommitment[q.id]=val;
    if(q.id==='more'){
      answers.commitments.push(currentCommitment);
      currentCommitment={};
      if(val==='Ù†Ø¹Ù…'){ commitmentStep=0; showQuestion(); return; }
      else { document.getElementById('nextContainer').style.display='none'; calculate(); return; }
    }
    commitmentStep++;
  }
  showQuestion();
}

function calculate(){
  const salary=parseFloat(answers.salary),
        months=parseInt(answers.months),
        years=months/12,
        profitMargin=parseFloat(answers.profitMargin),
        {financeType,supported,bundle}=answers;
  let deductionRate=0,addCommodityFee=false;
  if(financeType.includes('Ø´Ø®ØµÙŠ')||financeType.includes('Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ')){
    if(months>60){alert('Ù…Ø¯Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø´Ø®ØµÙŠ Ù„Ø§ ØªØªØ¬Ø§ÙˆØ² 60 Ø´Ù‡Ø±');return;}
    deductionRate=45; addCommodityFee=true;
  } else {
    deductionRate=supported==='Ù…Ø¯Ø¹ÙˆÙ…'?(bundle==='Ù„Ø§'?65:(salary<15000?55:65)):(salary<15000?55:65);
  }
  const allowedInst=salary*deductionRate/100;
  const commits=[...answers.commitments].sort((a,b)=>parseInt(a.months)-parseInt(b.months));
  const balloonPhases=commits.filter(c=>c.type==='Ù‚Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©'&&c.balloon==='Ù†Ø¹Ù…'&&c.balloonAmount)
    .map(c=>({start:c.months,end:c.months+24,value:c.balloonAmount/24}));
  const futurePhases=[];
  for(let m=1;m<=months;m++){
    const active=commits.filter(c=>m<=c.months).reduce((s,c)=>s+(c.amount||0),0);
    const extra=balloonPhases.reduce((s,b)=>(m>=b.start&&m<b.end)?s+b.value:s,0);
    let avail=allowedInst-active-extra;
    if(financeType.includes('Ø´Ø®ØµÙŠ')||financeType.includes('Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ'))
      avail=Math.min(avail,salary*0.3333);
    futurePhases.push({month:m,inst:avail});
  }
  const finalPhases=[];
  futurePhases.forEach(fp=>{
    const last=finalPhases[finalPhases.length-1];
    if(!last||last.inst!==fp.inst) finalPhases.push({from:fp.month,to:fp.month,inst:fp.inst});
    else last.to=fp.month;
  });
  const totalInst=finalPhases.reduce((s,p)=>s+p.inst*(p.to-p.from+1),0);
  const profitFactor=years*profitMargin/100+1;
  const netFinance=totalInst/profitFactor;
  let adminFee=netFinance*0.01,vat=adminFee*0.15;
  if(adminFee+vat>5750){adminFee=5000;vat=750;}
  const commodityFee=addCommodityFee?netFinance*0.01:0;
  const finalNet=netFinance-(adminFee+vat+commodityFee);
  const totalProfitWithFees=totalInst-finalNet;
  let supportText='';
  if(financeType==='ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ'&&supported==='Ù…Ø¯Ø¹ÙˆÙ…'&&bundle==='Ù†Ø¹Ù…'){
    const sup=salary<10000?150000:100000;
    supportText=`<p class="highlight">Ø¯Ø¹Ù… Ø­ÙƒÙˆÙ…ÙŠ Ù…Ø¶Ø§Ù: ${sup.toLocaleString()} Ø±ÙŠØ§Ù„</p>`;
  }
  const name=answers.clientName||"Ø§Ù„Ø¹Ù…ÙŠÙ„";
  const duration=describeMonths(months);
  const finalNetFixed=finalNet.toFixed(0);
  let html='<div class="result">';
  html+=`<p style="color:#1565c0;font-size:36px;"><strong>Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙˆÙ…Ø³Ù‡Ù„Ø§ ÙŠØ§ ${name}</strong></p>`;
  html+=`<p>Ù…Ø¯Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„: <strong>${duration}</strong></p>`;
  if(finalPhases.some(p=>p.inst<=0)){
    html+=`<p style="color:red;font-size:38px;font-weight:bold;">Ù†Ø¹ØªØ°Ø± Ù…Ù†Ùƒ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙ…ÙˆÙŠÙ„Ùƒ</p>`;
  }
  finalPhases.forEach(p=>{
    html+=`<p><strong>Ø§Ù„Ù‚Ø³Ø· Ù…Ù† Ø§Ù„Ø´Ù‡Ø± ${p.from} Ø¥Ù„Ù‰ ${p.to}:</strong> ${p.inst.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")} Ø±ÙŠØ§Ù„</p>`;
  });
  html+=`
    <p style="color:green;font-size:44px;font-weight:bold;">Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØµØ§ÙÙŠ Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${finalNetFixed.replace(/\B(?=(\d{3})+(?!\d))/g,",")} Ø±ÙŠØ§Ù„</p>
    ${supportText}
    <p style="color:green;font-size:36px;"><strong>Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØµØ§ÙÙŠ Ù‚Ø¨Ù„ Ø®ØµÙ… Ø§Ù„Ø±Ø³ÙˆÙ…:</strong> ${netFinance.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")} Ø±ÙŠØ§Ù„</p>
    <p style="color:red;font-size:36px;"><strong>Ø§Ù„Ø±Ø¨Ø­ Ø¯ÙˆÙ† Ø§Ù„Ø±Ø³ÙˆÙ…:</strong> ${(totalInst-netFinance).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")} Ø±ÙŠØ§Ù„</p>
    <p style="color:red;font-size:42px;"><strong>Ø§Ù„Ø±Ø¨Ø­ Ù…Ø¹ Ø§Ù„Ø±Ø³ÙˆÙ…:</strong> ${totalProfitWithFees.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")} Ø±ÙŠØ§Ù„</p>
    <p><strong>Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ø±Ø¨Ø­:</strong> ${profitFactor.toFixed(3)}</p>
    <p><strong>Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©:</strong> ${adminFee.toFixed(0)} Ø±ÙŠØ§Ù„</p>
    <p><strong>Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø±Ø³ÙˆÙ…:</strong> ${vat.toFixed(0)} Ø±ÙŠØ§Ù„</p>
    ${commodityFee?`<p><strong>Ø±Ø³ÙˆÙ… Ø§Ù„Ø³Ù„Ø¹:</strong> ${commodityFee.toFixed(0)} Ø±ÙŠØ§Ù„</p>`:''}
    <p><strong>Ø¨Ø§Ù„Ø£Ø­Ø±Ù:</strong> ${numberToArabicWords(parseInt(finalNetFixed))}</p>
    <h3 style="margin-top:30px;">Ø®Ø° Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© ÙˆØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§: ğŸ“0506214458 Ø²ÙˆØ±Ùˆ Ù…ÙˆÙ‚Ø¹Ù†Ø§: hlooleqrr.com</h3>
  </div>`;
  document.getElementById('question').innerHTML=html;
}
</script>

<footer>
  <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ© - <span id="datetime"></span></p>
</footer>
<script>
function updateDateTime(){
  const n=new Date();
  document.getElementById('datetime').innerText=
    `${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,'0')}-${String(n.getDate()).padStart(2,'0')}`+
    ` ${String(n.getHours()).padStart(2,'0')}:${String(n.getMinutes()).padStart(2,'0')}:${String(n.getSeconds()).padStart(2,'0')}`;
}
setInterval(updateDateTime,1000);
updateDateTime();
</script>
</body>
</html>