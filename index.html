<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>سرعة تملك العقار – حاسبة التمويل</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:'Tajawal',sans-serif;background:#f4f6f8;margin:0;text-align:center}
    header{background:#005c48;color:#fff;padding:20px}
    .container{max-width:650px;margin:20px auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 0 15px rgba(0,0,0,.1)}
    input,select,button{width:90%;padding:10px;margin:10px 0;font-size:16px;border-radius:5px;border:1px solid #ccc}
    button{background:#00796b;color:#fff;border:0;cursor:pointer}button:hover{background:#004d40}
    footer{font-size:12px;color:#666;margin-top:40px;padding:10px}
    .fade-in{opacity:0;transform:translateY(20px);animation:fade .6s forwards}@keyframes fade{to{opacity:1;transform:none}}
  </style>
</head>
<body>

<header>
  <h1>سرعة تملك العقار والحلول التمويلية – الحاسبة التقريبية</h1>
  <p>نقدّم أفضل الحلول التمويلية المتكاملة</p>
</header>

<div class="container" id="form-container">
  <div id="question"></div>
  <button onclick="nextQuestion()">ابدأ الحسبة</button>
</div>

<script>
const questions = [
  {label:'نوع التمويل؟',id:'financeType',type:'select',options:['تمويل عقاري','تمويل شخصي']},
  {label:'هل التمويل مدعوم؟',id:'supported',type:'select',options:['مدعوم','غير مدعوم'],showIf:a=>a.financeType==='تمويل عقاري'},
  {label:'هل ترغب في الحصول على الباقة المقدّمة (دفعة أولى)؟',id:'bundle',type:'select',options:['نعم','لا'],showIf:a=>a.supported==='مدعوم'},
  {label:'الراتب الشهري (ريال):',id:'salary',type:'number'},
  {label:'حدد المدة:',id:'tenure',type:'range',min:1,max:30,value:20},
  {label:'هامش الربح السنوي (%) :',id:'profitMargin',type:'number'},
  {label:'هل لديك التزامات؟',id:'hasCommitments',type:'select',options:['نعم','لا']},
  {label:'نوع الالتزام:',id:'commitmentType',type:'select',options:['قرض شخصي','قرض سيارة','قرض استهلاكي'],showIf:a=>a.hasCommitments==='نعم'},
  {label:'قسط الالتزام الشهري (ريال):',id:'commitmentPayment',type:'number',showIf:a=>a.hasCommitments==='نعم'},
  {label:'الأشهر المتبقية للالتزام:',id:'commitmentMonths',type:'number',showIf:a=>a.hasCommitments==='نعم'},
  {label:'(للقرض السيارة) الدفعة الأخيرة (ريال):',id:'lastPayment',type:'number',showIf:a=>a.hasCommitments==='نعم'&&a.commitmentType==='قرض سيارة'}
];

let answers = {};
let current = 0;

function showQuestion(i){
  const box = document.getElementById('question');
  box.innerHTML = '';

  if (i >= questions.length) {
    calculateResult();
    document.querySelector('button').style.display = 'none';
    return;
  }

  const q = questions[i];
  if (q.showIf && !q.showIf(answers)) {
    current++;
    showQuestion(current);
    return;
  }

  const div = document.createElement('div');
  div.className = 'fade-in';

  const lab = document.createElement('label');
  lab.textContent = q.label;
  div.appendChild(lab);
  div.appendChild(document.createElement('br'));

  if (q.type === 'select') {
    const sel = document.createElement('select');
    sel.id = q.id;
    sel.onchange = () => {
      answers[q.id] = sel.value;
      if (q.id === 'financeType') updateTenureSlider();
    };
    q.options.forEach(opt => {
      const option = document.createElement('option');
      option.value = opt;
      option.textContent = opt;
      sel.appendChild(option);
    });
    div.appendChild(sel);
  } else if (q.type === 'range') {
    const slider = document.createElement('input');
    slider.type = 'range';
    slider.id = q.id;
    updateTenureProps(slider);
    slider.oninput = () => {
      document.getElementById(q.id + 'Val').textContent = slider.value;
      answers[q.id] = slider.value;
    };
    div.appendChild(slider);
    div.appendChild(document.createElement('br'));
    const span = document.createElement('span');
    span.id = q.id + 'Val';
    span.textContent = slider.value;
    div.appendChild(span);
    div.appendChild(document.createTextNode(' '));
    const unit = document.createElement('span');
    unit.id = q.id + 'Unit';
    unit.textContent = answers.financeType === 'تمويل شخصي' ? 'شهر' : 'سنة';
    div.appendChild(unit);
  } else {
    const inp = document.createElement('input');
    inp.type = q.type;
    inp.id = q.id;
    inp.oninput = () => answers[q.id] = inp.value;
    div.appendChild(inp);
  }

  box.appendChild(div);
}

function updateTenureProps(slider){
  const isPersonal = answers.financeType === 'تمويل شخصي';
  slider.min = 1;
  slider.max = isPersonal ? 60 : 30;
  slider.value = isPersonal ? 12 : 20;
}

function updateTenureSlider(){
  const slider = document.getElementById('tenure');
  if (slider) {
    updateTenureProps(slider);
    document.getElementById('tenureVal').textContent = slider.value;
  }
  const unit = document.getElementById('tenureUnit');
  if (unit) unit.textContent = answers.financeType === 'تمويل شخصي' ? 'شهر' : 'سنة';
}

function nextQuestion(){
  if (current > 0) {
    const prev = questions[current - 1];
    const input = document.getElementById(prev.id);
    if (input) answers[prev.id] = input.value;
  }
  showQuestion(current);
  current++;
}
</script>

<footer>
  <p>© سرعة تملك العقار والحلول التمويلية – <span id="datetime"></span></p>
</footer>

<script>
function updateTime() {
  document.getElementById('datetime').textContent = new Date().toLocaleString('ar-EG');
}
setInterval(updateTime, 1000);
updateTime();
</script>

</body>
</html>