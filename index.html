<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ©</title>
  <style>
    body { font-family: 'Tajawal', sans-serif; background: #f4f6f8; margin:0; text-align:center; font-size:32px; }
    header { background:#005c48; color:#fff; padding:25px; font-size:40px; }
    h2 { font-size:32px; margin:10px 0 20px; }
    .container { max-width:650px; margin:0 auto 25px; background:#fff; padding:25px; border-radius:10px; box-shadow:0 0 15px rgba(0,0,0,.1); }
    input, select, button { width:92%; padding:20px; margin:18px 0; font-size:32px; border-radius:5px; border:1px solid #ccc; box-sizing:border-box; }
    .result p { margin:12px 0; text-align:right; }
    .highlight { color:#2e7d32; font-size:36px; }
    #resetButtonContainer { position:fixed; bottom:15px; left:50%; transform:translateX(-50%); z-index:1000; }
    #resetButtonContainer button { font-size:16px; padding:6px 12px; width:auto; }
  </style>
</head>
<body>
  <header>Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ©</header>
  <h2>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©</h2>
  <div class="container">
    <div id="question"></div>
    <button id="mainButton" onclick="handleStartOrReset()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø³Ø¨Ø©</button>
    <div id="nextContainer" style="display:none;">
      <button onclick="nextQuestion()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
  </div>
  <div id="resetButtonContainer" style="display:none;">
    <button onclick="handleStartOrReset()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø© ğŸ”</button>
  </div>

<script>
let hasStarted = false, step = 0, commitmentStep = 0;
let answers = { commitments: [] }, currentCommitment = {};

const generalQuestions = [
  { id:'financeType',   label:'Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ØªØ±ÙŠØ¯ Ø­Ø³Ø¨ØªÙ‡:',    type:'select', options:['ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ','ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ Ø£Ùˆ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ'] },
  { id:'clientName',    label:'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙŠÙ…:',                    type:'text' },
  { id:'birthHijri',    label:'ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ (Ù‡Ø¬Ø±ÙŠ):',           type:'dateHijri' },
  { id:'jobType',       label:'Ù†ÙˆØ¹ Ø§Ù„ÙˆØ¸ÙŠÙØ©:',                    type:'select', options:['Ø¹Ø³ÙƒØ±ÙŠ','Ù…Ø¯Ù†ÙŠ','Ø®Ø§Øµ Ø´Ø¨Ù‡ Ø­ÙƒÙˆÙ…ÙŠ','Ø®Ø§Øµ Ù…Ø¹ØªÙ…Ø¯','Ø®Ø§Øµ ØºÙŠØ± Ù…Ø¹ØªÙ…Ø¯'] },
  { show:a=>a.jobType==='Ø¹Ø³ÙƒØ±ÙŠ',
    id:'rank',         label:'Ø­Ø¯Ø¯ Ø±ØªØ¨ØªÙƒ Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©:',              type:'select',
    options:['Ø¬Ù†Ø¯ÙŠ','Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„','Ø¹Ø±ÙŠÙ','ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨','Ø±Ù‚ÙŠØ¨','Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„','Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡','Ù…Ù„Ø§Ø²Ù…','Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„','Ù†Ù‚ÙŠØ¨','Ø±Ø§Ø¦Ø¯','Ù…Ù‚Ø¯Ù…','Ø¹Ù‚ÙŠØ¯','Ø¹Ù…ÙŠØ¯','Ù„ÙˆØ§Ø¡']
  },
  { show:()=>answers.jobType==='Ø¹Ø³ÙƒØ±ÙŠ' && getRetirementMonths()<25*12,
    id:'extended',     label:'Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø­Ø³Ø¨Ø© Ù…Ù…ØªØ¯Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯ØŸ', type:'select', options:['Ù†Ø¹Ù…','Ù„Ø§'] },
  { show:a=>a.extended==='Ù†Ø¹Ù…',
    id:'basicSalary',  label:'Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Ø¨Ø¯ÙˆÙ† Ø¨Ø¯Ù„Ø§ØªØŒ Ø±ÙŠØ§Ù„):', type:'number' },
  { show:a=>a.extended==='Ù†Ø¹Ù…',
    id:'appointHijri', label:'ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹ÙŠÙŠÙ† (Ù‡Ø¬Ø±ÙŠ):',             type:'dateHijri' },
  { id:'salary',       label:'Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø±ÙŠØ§Ù„):',       type:'number' },
  { id:'profitMargin', label:'Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­ (%):',                   type:'number', default:'4.5' },
  { id:'months',       label:'Ø¹Ø¯Ø¯ Ø£Ø´Ù‡Ø± Ø§Ù„ØªÙ…ÙˆÙŠÙ„:',                  type:'select', dynamic:true },
  { id:'hasCommitments', label:'Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù…Ø§Ù„ÙŠØ©ØŸ',        type:'select', options:['Ù†Ø¹Ù…','Ù„Ø§'] }
];

const commitmentQuestions = [
  { id:'type',    label:'Ù†ÙˆØ¹ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…:',           type:'select', options:['Ù‚Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©','Ù‚Ø±Ø¶ Ø´Ø®ØµÙŠ','Ù‚Ø±Ø¶ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ'] },
  { id:'amount',  label:'Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠ (Ø±ÙŠØ§Ù„):',     type:'number' },
  { id:'months',  label:'Ø£Ø´Ù‡Ø± Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:',  type:'select', dynamic:true },
  { id:'balloon', label:'Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø¯ÙØ¹Ø© Ø£Ø®ÙŠØ±Ø©ØŸ',      type:'select', options:['Ù†Ø¹Ù…','Ù„Ø§'] },
  { show:c=>c.balloon==='Ù†Ø¹Ù…', id:'balloonAmount', label:'Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø© (Ø±ÙŠØ§Ù„):', type:'number' },
  { id:'more',    label:'Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØªØ²Ø§Ù… Ø¢Ø®Ø±ØŸ',      type:'select', options:['Ù†Ø¹Ù…','Ù„Ø§'] }
];

function getRetirementMonths(){
  const cur=1446, birth= parseInt(answers.birthHijriYear)||cur, age=cur-birth;
  const ranks={Ø¬Ù†Ø¯ÙŠ:44,'Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„':44,Ø¹Ø±ÙŠÙ:46,'ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨':46,Ø±Ù‚ÙŠØ¨:48,'Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„':50,'Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡':52,
               Ù…Ù„Ø§Ø²Ù…:48,'Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„':50,Ù†Ù‚ÙŠØ¨:52,Ø±Ø§Ø¦Ø¯:54,Ù…Ù‚Ø¯Ù…:56,Ø¹Ù‚ÙŠØ¯:58,Ø¹Ù…ÙŠØ¯:60,Ù„ÙˆØ§Ø¡:60};
  const retireAge = answers.jobType==='Ø¹Ø³ÙƒØ±ÙŠ'? (ranks[answers.rank]||60) : 60;
  return Math.max(0,(retireAge-age)*12);
}

function getMaxAllowedMonths(){
  const cur=1446, birth=parseInt(answers.birthHijriYear)||cur, age=cur-birth;
  const monthsUntil60 = (60 - age) * 12;
  const baseLimit = (answers.financeType||'').includes('Ø´Ø®ØµÙŠ')|| (answers.financeType||'').includes('Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ') ? 60 : 360;
  if(answers.extended==='Ù†Ø¹Ù…'){
    return Math.min(monthsUntil60, baseLimit);
  }
  return Math.min(getRetirementMonths(), baseLimit);
}

function describeMonths(m){
  const y=Math.floor(m/12), mm=m%12;
  let t=`${m} Ø´Ù‡Ø±`;
  if(y||mm){
    t+=' ('; if(y) t+=`${y} Ø³Ù†Ø©${y>1?'Ø§Øª':''}`; if(y&&mm) t+=' Ùˆ'; if(mm) t+=`${mm} Ø´Ù‡Ø±`; t+=')';
  }
  return t;
}

function handleStartOrReset(){
  if(!hasStarted){
    hasStarted=true;
    document.getElementById('mainButton').style.display='none';
    document.getElementById('resetButtonContainer').style.display='block';
    showQuestion();
  } else resetCalc();
}

function resetCalc(){
  answers={commitments:[]}; step=commitmentStep=0; currentCommitment={};
  hasStarted=true;
  document.getElementById('mainButton').style.display='none';
  showQuestion();
}

function showQuestion(){
  const cont=document.getElementById('question');
  cont.innerHTML=''; document.getElementById('nextContainer').style.display='block';
  let q;
  if(step<generalQuestions.length){
    q=generalQuestions[step];
    if(q.show&&!q.show(answers)){ step++; return showQuestion(); }
  } else if(answers.hasCommitments==='Ù†Ø¹Ù…'){
    q=commitmentQuestions[commitmentStep];
    if(q.show&&!q.show(currentCommitment)){ commitmentStep++; return showQuestion(); }
  } else {
    document.getElementById('nextContainer').style.display='none';
    return calculate();
  }

  if(q.type==='dateHijri'){
    const div=document.createElement('div'); div.classList.add('fade-in');
    // Selected years from 1370 to 1447
    div.innerHTML=`<label>${q.label}</label><br>
      <select id="${q.id}Day"><option value="">Ø§Ù„ÙŠÙˆÙ…</option>${
        Array.from({length:30},(_,i)=>`<option value="${i+1}">${i+1}</option>`).join('')
      }</select>
      <select id="${q.id}Month"><option value="">Ø§Ù„Ø´Ù‡Ø±</option>${
        Array.from({length:12},(_,i)=>`<option value="${i+1}">${i+1}</option>`).join('')
      }</select>
      <select id="${q.id}Year"><option value="">Ø§Ù„Ø³Ù†Ø©</option>${
        Array.from({length:(1447-1370+1)},(_,i)=>`<option value="${1370+i}">${1370+i}</option>`).join('')
      }</select>`;
    cont.appendChild(div);
    return;
  }

  const div=document.createElement('div'); div.classList.add('fade-in');
  div.innerHTML=`<label>${q.label}</label><br>`;
  if(q.type==='select'){
    const sel=document.createElement('select'); sel.id=q.id;
    sel.innerHTML='<option value="">Ø§Ø®ØªØ±...</option>';
    if(q.dynamic){
      for(let i=1;i<=getMaxAllowedMonths();i++){
        sel.innerHTML+=`<option value="${i}">${describeMonths(i)}</option>`;
      }
    } else {
      q.options.forEach(o=> sel.innerHTML+=`<option value="${o}">${o}</option>`);
    }
    div.appendChild(sel);
  } else {
    div.innerHTML+=`<input type="${q.type}" id="${q.id}" ${q.default?`value="${q.default}"`:''}>`;
  }
  cont.appendChild(div);
}

function nextQuestion(){
  const q=step<generalQuestions.length?generalQuestions[step]:commitmentQuestions[commitmentStep];
  if(q.type==='dateHijri'){
    const d=document.getElementById(q.id+'Day').value,
          m=document.getElementById(q.id+'Month').value,
          y=document.getElementById(q.id+'Year').value;
    if(!d||!m||!y){ alert('ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® ÙƒØ§Ù…Ù„Ø§Ù‹'); return; }
    answers[q.id+'Day']=d; answers[q.id+'Month']=m; answers[q.id+'Year']=y;
    step++; return showQuestion();
  }
  const el=document.getElementById(q.id), val=el.value;
  if(!val){ alert('ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚Ù„ Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©'); return; }
  if(step<generalQuestions.length){
    answers[q.id]=val; step++;
  } else {
    if(q.id==='months') currentCommitment.months=parseInt(val);
    else if(['amount','balloonAmount'].includes(q.id)) currentCommitment[q.id]=parseFloat(val);
    else currentCommitment[q.id]=val;
    if(q.id==='more'){
      answers.commitments.push(currentCommitment);
      currentCommitment={};
      if(val==='Ù†Ø¹Ù…'){ commitmentStep=0; return showQuestion(); }
      else{ document.getElementById('nextContainer').style.display='none'; return calculate(); }
    }
    commitmentStep++;
  }
  showQuestion();
}

function calculate(){
  const salary=parseFloat(answers.salary),
        basic=parseFloat(answers.basicSalary||salary),
        months=parseInt(answers.months),
        years=months/12,
        profitMargin=parseFloat(answers.profitMargin),
        {financeType,supported,bundle,extended}=answers;

  let deductionRate=0, addCommodity=false;
  if(financeType.includes('Ø´Ø®ØµÙŠ')||financeType.includes('Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ')){
    deductionRate=45; addCommodity=true;
  } else {
    if(supported==='Ù…Ø¯Ø¹ÙˆÙ…'){
      deductionRate=bundle==='Ù„Ø§'?65:(salary<15000?55:65);
    } else {
      deductionRate=salary<15000?55:65;
    }
  }

  const allowedInst=salary*deductionRate/100;
  let retireAllowed=allowedInst;
  if(extended==='Ù†Ø¹Ù…'){
    const appointYear=parseInt(answers.appointHijriYear),
          birthYear=parseInt(answers.birthHijriYear),
          retireAge=(answers.jobType==='Ø¹Ø³ÙƒØ±ÙŠ'
            ? ({Ø¬Ù†Ø¯ÙŠ:44,'Ø¬Ù†Ø¯ÙŠ Ø£ÙˆÙ„':44,Ø¹Ø±ÙŠÙ:46,'ÙˆÙƒÙŠÙ„ Ø±Ù‚ÙŠØ¨':46,Ø±Ù‚ÙŠØ¨:48,'Ø±Ù‚ÙŠØ¨ Ø£ÙˆÙ„':50,'Ø±Ø¦ÙŠØ³ Ø±Ù‚Ø¨Ø§Ø¡':52,
                Ù…Ù„Ø§Ø²Ù…:48,'Ù…Ù„Ø§Ø²Ù… Ø£ÙˆÙ„':50,Ù†Ù‚ÙŠØ¨:52,Ø±Ø§Ø¦Ø¯:54,Ù…Ù‚Ø¯Ù…:56,Ø¹Ù‚ÙŠØ¯:58,Ø¹Ù…ÙŠØ¯:60,Ù„ÙˆØ§Ø¡:60}[answers.rank]||60)
            : 60),
          serviceYears=Math.max(0,(birthYear+retireAge)-appointYear),
          retireSalaryEst=basic*0.025*serviceYears;
    retireAllowed=retireSalaryEst*deductionRate/100;
  }

  const commits=[...answers.commitments].sort((a,b)=>a.months-b.months);
  const balloons=commits.filter(c=>c.type==='Ù‚Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©'&&c.balloon==='Ù†Ø¹Ù…'&&c.balloonAmount)
    .map(c=>({start:c.months,end:c.months+24,value:c.balloonAmount/24}));

  const phases=[];
  for(let m=1;m<=months;m++){
    const active=commits.filter(c=>m<=c.months).reduce((s,c)=>s+(c.amount||0),0);
    const extra=balloons.reduce((s,b)=>(m>=b.start&&m<b.end)?s+b.value:s,0);
    const allowed=(m>getRetirementMonths()&&extended==='Ù†Ø¹Ù…'?retireAllowed:allowedInst);
    const inst=allowed-active-extra;
    if(phases.length&&phases[phases.length-1].inst===inst) phases[phases.length-1].to=m;
    else phases.push({from:m,to:m,inst});
  }

  const total=phases.reduce((s,p)=>s+p.inst*(p.to-p.from+1),0),
        profitFactor=(years*profitMargin/100)+1,
        net=total/profitFactor;

  let admin=net*0.01, vat=admin*0.15;
  if(admin+vat>5750){admin=5000;vat=750;}
  const commFee=addCommodity?net*0.01:0,
        finalNet=net-(admin+vat+commFee),
        profitFees=total-finalNet;

  let supportText='';
  if(financeType==='ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ'&&supported==='Ù…Ø¯Ø¹ÙˆÙ…'&&bundle==='Ù†Ø¹Ù…'){
    const sup=salary<10000?150000:100000;
    supportText=`<p class="highlight">Ø¯Ø¹Ù… Ø­ÙƒÙˆÙ…ÙŠ Ù…Ø¶Ø§Ù: ${sup.toLocaleString()} Ø±ÙŠØ§Ù„</p>`;
  }

  const name=answers.clientName||'Ø§Ù„Ø¹Ù…ÙŠÙ„',
        duration=describeMonths(months),
        fixed=finalNet.toFixed(0);

  let html='<div class="result"><h2>Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø­Ø³Ø¨Ø© (Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©):</h2>';
  html+=`<p style="color:#1565c0;font-size:36px;"><strong>Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙˆÙ…Ø³Ù‡Ù„Ø§ ÙŠØ§ ${name}</strong></p>`;
  html+=`<p style="font-size:32px;">Ù…Ø¯Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„: <strong>${duration}</strong></p>`;
  if(phases.every(p=>p.inst<=0)) html+=`<p style="color:red;font-size:38px;font-weight:bold;">Ù†Ø¹ØªØ°Ø± Ù…Ù†Ùƒ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙ…ÙˆÙŠÙ„Ùƒ</p>`;
  phases.forEach(p=>{
    html+=`<p><strong>Ø§Ù„Ù‚Ø³Ø· Ù…Ù† Ø§Ù„Ø´Ù‡Ø± ${p.from} Ø¥Ù„Ù‰ ${p.to}:</strong> ${p.inst.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")} Ø±ÙŠØ§Ù„</p>`;
  });
  html+=`
    <p style="color:green;font-size:44px;font-weight:bold;">Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØµØ§ÙÙŠ Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${fixed.replace(/\B(?=(\d{3})+(?!\d))/g,",")} Ø±ÙŠØ§Ù„</p>
    ${supportText}
    <p style="color:green;font-size:36px;"><strong>Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„ØµØ§ÙÙŠ Ù‚Ø¨Ù„ Ø®ØµÙ… Ø§Ù„Ø±Ø³ÙˆÙ…:</strong> ${net.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")} Ø±ÙŠØ§Ù„</p>
    <p style="color:red;font-size:36px;"><strong>Ø§Ù„Ø±Ø¨Ø­ Ø¯ÙˆÙ† Ø±Ø³ÙˆÙ…:</strong> ${(total-net).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")} Ø±ÙŠØ§Ù„</p>
    <p style="color:red;font-size:42px;"><strong>Ø§Ù„Ø±Ø¨Ø­ Ù…Ø¹ Ø±Ø³ÙˆÙ…:</strong> ${profitFees.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")} Ø±ÙŠØ§Ù„</p>
    <p><strong>Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ø±Ø¨Ø­:</strong>${profitFactor.toFixed(3)}</p>
    <p><strong>Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©:</strong>${admin.toFixed(0)} Ø±ÙŠØ§Ù„</p>
    <p><strong>Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø±Ø³ÙˆÙ…:</strong>${vat.toFixed(0)} Ø±ÙŠØ§Ù„</p>
    ${commFee?`<p><strong>Ø±Ø³ÙˆÙ… Ø§Ù„Ø³Ù„Ø¹:</strong>${commFee.toFixed(0)} Ø±ÙŠØ§Ù„</p>`:''}
    <p><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ù…Ø¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­:</strong>${total.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")} Ø±ÙŠØ§Ù„</p>
    <p><strong>Ø¨Ø§Ù„Ø£Ø­Ø±Ù:</strong>${numberToArabicWords(parseInt(fixed))}</p>
    <h3 style="margin-top:30px;">Ø®Ø° Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© ÙˆØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§: ğŸ“0506214458  Ø²ÙˆØ±Ùˆ Ù…ÙˆÙ‚Ø¹Ù†Ø§: hlooleqrr.com</h3>
  `;
  document.getElementById('question').innerHTML = html;
}
</script>

<footer>
  <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ© - <span id="datetime"></span></p>
</footer>
<script>
function updateDateTime(){
  const d=new Date();
  document.getElementById('datetime').innerText =
    `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`+
    ` ${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}:${String(d.getSeconds()).padStart(2,'0')}`;
}
setInterval(updateDateTime,1000);
updateDateTime();
</script>
</body>
</html>